<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>DEBUG &#8211; 山情</title>
	<atom:link href="https://github.com/appi77/myblog/category/si-technology/debug/feed/" rel="self" type="application/rss+xml" />
	<link>http://github.com/appi77/myblog/</link>
	<description>산정의 블로그</description>
	<lastBuildDate>Mon, 18 Nov 2019 14:14:08 +0000</lastBuildDate>
	<language>ko-KR</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.2</generator>

<image>
	<url>https://github.com/appi77/myblog/wordpress/wp-content/uploads/2016/07/cropped-20160505_122002-32x32.jpg</url>
	<title>DEBUG &#8211; 山情</title>
	<link>http://github.com/appi77/myblog/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>Memory Dump Analysis Anthology, Volume 1</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/memory-dump-analysis-anthology-volume-1/</link>
				<pubDate>Mon, 18 Nov 2019 14:14:08 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=1574</guid>
				<description><![CDATA[https://doc.lagout.org/science/0_Computer%20Science/9_Others/9_Misc/Memory%20Dump%20Analysis%20Anthology%2C%20Volume%201.pdf]]></description>
								<content:encoded><![CDATA[<p><a href="https://doc.lagout.org/science/0_Computer%20Science/9_Others/9_Misc/Memory%20Dump%20Analysis%20Anthology%2C%20Volume%201.pdf">https://doc.lagout.org/science/0_Computer%20Science/9_Others/9_Misc/Memory%20Dump%20Analysis%20Anthology%2C%20Volume%201.pdf</a></p>
]]></content:encoded>
										</item>
		<item>
		<title>[DEBUG사례] BSOD / nt!ObpCaptureHandleInformation</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/debug%ec%82%ac%eb%a1%80-bsod-ntobpcapturehandleinformation/</link>
				<comments>https://github.com/appi77/myblog/si-technology/debug/debug%ec%82%ac%eb%a1%80-bsod-ntobpcapturehandleinformation/#comments</comments>
				<pubDate>Mon, 25 Feb 2019 02:48:33 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=576</guid>
				<description><![CDATA[▶ 실제 사례 1: kd&#62; vertarget Windows 7 Kernel Version 7601 (Service Pack 1) MP (4 procs) Free x64 Product: WinNt, suite: TerminalServer SingleUserTS Built by: 7601.24231.amd64fre.win7sp1_ldr.180810-0600 Machine Name:&#8221;VMOA2024974-01&#8243; Kernel base = 0xfffff800`01a1f000 PsLoadedModuleList =&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<h4 align="left"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </span><span lang="EN-US">실제 사례</span></h4>
<p>1: kd&gt; vertarget<br />
Windows 7 Kernel Version 7601 (Service Pack 1) MP (4 procs) Free x64<br />
Product: WinNt, suite: TerminalServer SingleUserTS<br />
Built by: 7601.24231.amd64fre.win7sp1_ldr.180810-0600<br />
Machine Name:&#8221;VMOA2024974-01&#8243;<br />
Kernel base = 0xfffff800`01a1f000 PsLoadedModuleList = 0xfffff800`01c59c90<br />
Debug session time: Thu Jan 17 10:58:58.567 2019 (UTC + 9:00)<br />
System Uptime: 3 days 0:32:26.132</p>
<p>1: kd&gt; !sysinfo machineid<br />
Machine ID Information [From Smbios 2.7, DMIVersion 0, Size=10220]<br />
BiosMajorRelease = 4<br />
BiosMinorRelease = 6<br />
FirmwareMajorRelease = 0<br />
FirmwareMinorRelease = 0<br />
BiosVendor = Phoenix Technologies LTD<br />
BiosVersion = 6.00<br />
BiosReleaseDate = 04/05/2016<br />
SystemManufacturer = VMware, Inc.<br />
SystemProductName = VMware Virtual Platform<br />
SystemVersion = None<br />
BaseBoardManufacturer = Intel Corporation<br />
BaseBoardProduct = 440BX Desktop Reference Platform<br />
BaseBoardVersion = None</p>
<p>1: kd&gt; !cpuinfo<br />
CP F/M/S Manufacturer MHz PRCB Signature MSR 8B Signature Features<br />
0 6,79,1 GenuineIntel 2594 0b00002100000000 31193ffe<br />
1 6,79,1 GenuineIntel 2594 0b00002100000000 31193ffe<br />
2 6,79,1 GenuineIntel 2593 0b00002100000000 31193ffe<br />
3 6,79,1 GenuineIntel 2594 0b00002100000000 31193ffe<br />
Cached Update Signature 0b00002100000000<br />
Initial Update Signature 0b00002100000000</p>
<p>1: kd&gt; !vm<br />
*** Virtual Memory Usage ***<br />
Physical Memory: 2097038 ( 8388152 Kb)<br />
Page File: \??\C:\pagefile.sys<br />
Current: 8695352 Kb Free Space: 5968068 Kb<br />
Minimum: 8695352 Kb Maximum: 25164456 Kb<br />
Unimplemented error for MiSystemVaTypeCount<br />
Available Pages: 791288 ( 3165152 Kb)<br />
ResAvail Pages: 1965535 ( 7862140 Kb)<br />
Locked IO Pages: 0 ( 0 Kb)<br />
Free System PTEs: 33564273 ( 134257092 Kb)<br />
Modified Pages: 12771 ( 51084 Kb)<br />
Modified PF Pages: 12753 ( 51012 Kb)<br />
NonPagedPool Usage: 29559056 ( 118236224 Kb)<br />
NonPagedPoolNx Usage: 32908 ( 131632 Kb)<br />
NonPagedPool Max: 1561080 ( 6244320 Kb)<br />
********** Excessive NonPaged Pool Usage *****<br />
PagedPool 0 Usage: 58975 ( 235900 Kb)<br />
PagedPool 1 Usage: 12996 ( 51984 Kb)<br />
PagedPool 2 Usage: 4998 ( 19992 Kb)<br />
PagedPool 3 Usage: 4917 ( 19668 Kb)<br />
PagedPool 4 Usage: 5068 ( 20272 Kb)<br />
PagedPool Usage: 86954 ( 347816 Kb)<br />
PagedPool Maximum: 33554432 ( 134217728 Kb)<br />
Session Commit: 25872 ( 103488 Kb)<br />
Shared Commit: 604170 ( 2416680 Kb)<br />
Special Pool: 0 ( 0 Kb)<br />
Shared Process: 22548 ( 90192 Kb)<br />
PagedPool Commit: 87018 ( 348072 Kb)<br />
Driver Commit: 23265 ( 93060 Kb)<br />
Committed pages: 2062764 ( 8251056 Kb)<br />
Commit limit: 4270402 ( 17081608 Kb)</p>
<p>1: kd&gt; !analyze -v<br />
*******************************************************************************<br />
* *<br />
* Bugcheck Analysis *<br />
* *<br />
*******************************************************************************</p>
<p>SYSTEM_SERVICE_EXCEPTION (3b)<br />
An exception happened while executing a system service routine.<br />
Arguments:<br />
Arg1: 00000000c0000005, Exception code that caused the bugcheck<br />
Arg2: fffff80001dc87b8, Address of the instruction which caused the bugcheck<br />
Arg3: fffff8801b90cc20, Address of the context record for the exception that caused the bugcheck<br />
Arg4: 0000000000000000, zero.</p>
<p>Debugging Details:<br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;</p>
<p>EXCEPTION_CODE: (NTSTATUS) 0xc0000005 &#8211; 0x%08lx</p>
<p>FAULTING_IP:<br />
nt!ObpCaptureHandleInformation+68<br />
fffff800`01dc87b8 8a4128 mov al,byte ptr [rcx+28h]</p>
<p>CONTEXT: fffff8801b90cc20 &#8212; (.cxr 0xfffff8801b90cc20)<br />
rax=000000000000002d rbx=00000000000004cc rcx=0000000000000000<br />
rdx=fffff88016992fb0 rsi=fffff8a00ebb0330 rdi=0000000000237578<br />
rip=fffff80001dc87b8 rsp=fffff8801b90d5f8 rbp=0000000000000000<br />
r8=fffff8a00ebb0330 r9=fffffa80085e8a50 r10=00000000000d0f88<br />
r11=fffff8801b90d688 r12=fffff8a00f2fd320 r13=000000000359abd0<br />
r14=fffff880168c2040 r15=fffff8801b90d6b8<br />
iopl=0 nv up ei pl zr na po nc<br />
cs=0010 ss=0018 ds=002b es=002b fs=0053 gs=002b efl=00010246<br />
nt!ObpCaptureHandleInformation+0x68:<br />
fffff800`01dc87b8 8a4128 mov al,byte ptr [rcx+28h] ds:002b:00000000`00000028=??<br />
Resetting default scope</p>
<p>DEFAULT_BUCKET_ID: VISTA_DRIVER_FAULT</p>
<p>BUGCHECK_STR: 0x3B</p>
<p>PROCESS_NAME: MiniCtrl.exe</p>
<p>CURRENT_IRQL: 0</p>
<p>LAST_CONTROL_TRANSFER: from fffff80001e53b8d to fffff80001dc87b8</p>
<p>STACK_TEXT:<br />
fffff880`1b90d5f8 fffff800`01e53b8d : 00000000`000004cc fffffa80`0c6d61f0 00000000`00000001 00000000`00000238 : nt!ObpCaptureHandleInformation+0x68<br />
fffff880`1b90d600 fffff800`01e54267 : fffff880`1b90d730 fffff880`16992fb0 00000000`00237578 00000000`00000001 : nt!ExSnapShotHandleTables+0x10d<br />
fffff880`1b90d680 fffff800`01edfaf5 : fffff880`1b90d730 00000000`000d0f88 00000000`00237578 00000000`00237578 : nt!ObGetHandleInformation+0x37<br />
fffff880`1b90d6b0 fffff800`01ef4e5b : 00000000`00000000 fffffa80`0d9a9f00 fffff880`168c2040 fffffa80`0c6d5000 : nt!ExpGetHandleInformation+0x55<br />
fffff880`1b90d6f0 fffff800`01d6aa25 : 00000000`03970040 00000000`00237578 00000000`03970040 00000000`00023758 : nt!ExpQuerySystemInformation+0x17eb<br />
fffff880`1b90daa0 fffff800`01ac09d3 : 00000000`00000001 00000000`03970038 00000000`00000001 00000000`00000000 : nt!NtQuerySystemInformation+0x4d<br />
fffff880`1b90dae0 00000000`77899bea : 00000001`4005708d 00000000`c0000004 00000000`0415c920 00000000`00010000 : nt!KiSystemServiceCopyEnd+0x13<br />
00000000`0359ab88 00000001`4005708d : 00000000`c0000004 00000000`0415c920 00000000`00010000 00000000`00237578 : ntdll!ZwQuerySystemInformation+0xa<br />
00000000`0359ab90 00000001`400579f0 : 00000000`00237578 00000000`00000001 00000000`0037f980 00000000`00000000 : MiniCtrl+0x5708d<br />
00000000`0359abd0 00000001`4003a1c1 : ffffffff`00000fb4 00000000`637b0fe2 00000000`0359f9c8 00000000`00000028 : MiniCtrl+0x579f0<br />
00000000`0359b0f0 00000001`400264ec : 00000000`0037f980 00000000`0359b1d0 00000000`00000001 00000000`00000000 : MiniCtrl+0x3a1c1<br />
00000000`0359b130 00000000`00000000 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : MiniCtrl+0x264ec</p>
<p>FOLLOWUP_IP:<br />
nt!ObpCaptureHandleInformation+68<br />
fffff800`01dc87b8 8a4128 mov al,byte ptr [rcx+28h]</p>
<p>SYMBOL_STACK_INDEX: 0</p>
<p>SYMBOL_NAME: nt!ObpCaptureHandleInformation+68</p>
<p>FOLLOWUP_NAME: MachineOwner</p>
<p>MODULE_NAME: nt</p>
<p>IMAGE_NAME: ntkrnlmp.exe</p>
<p>DEBUG_FLR_IMAGE_TIMESTAMP: 5b6dabb8</p>
<p>STACK_COMMAND: .cxr 0xfffff8801b90cc20 ; kb</p>
<p>FAILURE_BUCKET_ID: X64_0x3B_nt!ObpCaptureHandleInformation+68</p>
<p>BUCKET_ID: X64_0x3B_nt!ObpCaptureHandleInformation+68</p>
<p>Followup: MachineOwner</p>
<p>1: kd&gt; !ready<br />
No ready threads found.</p>
<p>1: kd&gt; !standby<br />
Process PID Thread Id Pri Base Pri Affinity Next CPU Ideal CPU CSwitches User Kernel State Time Reason<br />
================ ==== ================ === === ======== ======== ======== ========= ========= ==== ====== ======= ==== =======<br />
iexplore.exe *32 1d78 fffffa800b1bab50 8a4 12 8 15 3 1 2623 78ms 94ms Standby 15ms WrQueue</p>
<p>1: kd&gt; !mex.t fffffa800b1bab50<br />
Process Thread CID TEB UserTime KernelTime ContextSwitches Wait Reason Time State<br />
iexplore.exe *32 (fffffa800d848060) fffffa800b1bab50 (E|K|W|R|V) 1d78.8a4 000000007ef5e000 78ms 94ms 2623 WrQueue 15ms Standby on processor 3</p>
<p>1: kd&gt; !tl fffffa800b1bab50<br />
Warning! Zombie process(es) detected (not displayed). Count: 87 [zombie report]</p>
<p>1: kd&gt; !mex.tl -z -r<br />
Count Name Ses Thd Obj Handles Obj Pointers<br />
===== ========================== === === =========== ============<br />
1 BizRCSvr.exe 1 0 1 2<br />
1 CubeU.exe 2 0 0 1<br />
1 CubeU.exe 3 0 0 1<br />
1 DSH_Inj64.exe 1 0 1 1<br />
1 DSU_LiveUpdate64.exe 1 0 1 2<br />
1 EXCEL.EXE 1 0 2 2<br />
1 EXCEL.EXE 1 0 3 3<br />
1 notepad.exe 1 0 1 1<br />
1 notepad.exe 1 0 3 3<br />
1 notepad.exe 1 0 9 9<br />
1 POWERPNT.EXE 1 0 2 2<br />
1 software_reporter_tool.exe 1 0 0 1<br />
1 SWClient.exe 1 0 2 4<br />
1 syscfgdy.exe 1 0 1 2<br />
1 TDepend.exe 1 0 1 2<br />
2 CubeU.exe 4 0 0 1<br />
2 POWERPNT.EXE 1 0 3 3<br />
2 SWClient.exe 1 0 1 2<br />
2 V3Exec.exe 1 0 1 1<br />
3 CubeU.exe 1 0 0 1<br />
3 iexplore.exe 1 0 1 1<br />
3 TDepend64.exe 1 0 1 2<br />
4 CARC.exe 1 0 1 1<br />
4 CARCHMx32.exe 1 0 1 1<br />
4 CARCHMx64.exe 1 0 1 1<br />
4 syscfg64.exe 1 0 1 1<br />
5 EXCEL.EXE 1 0 1 1<br />
7 SWClient.exe 1 0 2 3<br />
27 POWERPNT.EXE 1 0 1 1<br />
===== ========================== === === =========== ============<br />
Count Name Ses Thd Obj Handles Obj Pointers<br />
87</p>
<p>1: kd&gt; !mex.tasklist -z<br />
PID Address Name Ses Thd Obj Handles Obj Pointers<br />
============== ================ ========================== === === =========== ============<br />
0x4ec 0n1260 fffffa800be8f110 SWClient.exe 1 0 2 3<br />
0xb04 0n2820 fffffa8006d9d350 CubeU.exe 1 0 0 1<br />
0x9d4 0n2516 fffffa800befd710 SWClient.exe 1 0 2 3<br />
0xbe8 0n3048 fffffa800be99890 SWClient.exe 1 0 2 3<br />
0x91c 0n2332 fffffa800bf07b00 SWClient.exe 1 0 2 3<br />
0xc34 0n3124 fffffa800a2736f0 SWClient.exe 1 0 1 2<br />
0x1640 0n5696 fffffa800719fb00 SWClient.exe 1 0 1 2<br />
0x1a8c 0n6796 fffffa80070fbb00 SWClient.exe 1 0 2 3<br />
0x428 0n1064 fffffa8007f508f0 CARC.exe 1 0 1 1<br />
0x1af8 0n6904 fffffa8007371b00 CARCHMx64.exe 1 0 1 1<br />
0x1c84 0n7300 fffffa8007082b00 CARCHMx32.exe 1 0 1 1<br />
0x1ca0 0n7328 fffffa800752f060 DSH_Inj64.exe 1 0 1 1<br />
0x1d00 0n7424 fffffa8007dd3b00 syscfg64.exe 1 0 1 1<br />
0x20f0 0n8432 fffffa8008d93720 BizRCSvr.exe 1 0 1 2<br />
0xcc8 0n3272 fffffa80073d2060 DSU_LiveUpdate64.exe 1 0 1 2<br />
0x2588 0n9608 fffffa800d3c46a0 notepad.exe 1 0 9 9<br />
0x2780 0n10112 fffffa800e1e3060 notepad.exe 1 0 3 3<br />
0x28dc 0n10460 fffffa8008380060 POWERPNT.EXE 1 0 1 1<br />
0x1f84 0n8068 fffffa800e2c0060 POWERPNT.EXE 1 0 1 1<br />
0xac8 0n2760 fffffa800e376060 POWERPNT.EXE 1 0 2 2<br />
0x29a8 0n10664 fffffa800da15b00 EXCEL.EXE 1 0 1 1<br />
0x2490 0n9360 fffffa800734bb00 EXCEL.EXE 1 0 1 1<br />
0x26b4 0n9908 fffffa800e212800 POWERPNT.EXE 1 0 1 1<br />
0x5ac 0n1452 fffffa800e3e3060 EXCEL.EXE 1 0 2 2<br />
0x23c0 0n9152 fffffa800e499060 EXCEL.EXE 1 0 3 3<br />
0x2884 0n10372 fffffa800eab5060 SWClient.exe 1 0 2 3<br />
0x28f8 0n10488 fffffa800cc5fb00 CubeU.exe 2 0 0 1<br />
0x1b7c 0n7036 fffffa800a1d4680 CARC.exe 1 0 1 1<br />
0x284c 0n10316 fffffa800abe6b00 CARCHMx64.exe 1 0 1 1<br />
0x2624 0n9764 fffffa8007120340 CARCHMx32.exe 1 0 1 1<br />
0x24e0 0n9440 fffffa800cc31350 syscfg64.exe 1 0 1 1<br />
0x134 0n308 fffffa80083d0460 SWClient.exe 1 0 2 3<br />
0x2398 0n9112 fffffa800de6b890 CubeU.exe 1 0 0 1<br />
0x17ac 0n6060 fffffa800975a060 CARC.exe 1 0 1 1<br />
0x26f0 0n9968 fffffa800ec62060 CARCHMx64.exe 1 0 1 1<br />
0x900 0n2304 fffffa800a2cd5b0 CARCHMx32.exe 1 0 1 1<br />
0x27e0 0n10208 fffffa8007019b00 syscfg64.exe 1 0 1 1<br />
0x2a28 0n10792 fffffa800e518870 EXCEL.EXE 1 0 1 1<br />
0xe48 0n3656 fffffa800cc07060 POWERPNT.EXE 1 0 1 1<br />
0x1a74 0n6772 fffffa800e448b00 POWERPNT.EXE 1 0 1 1<br />
0xfd4 0n4052 fffffa800cf0aa50 POWERPNT.EXE 1 0 1 1<br />
0x2bd8 0n11224 fffffa800d7e6960 POWERPNT.EXE 1 0 1 1<br />
0x2a9c 0n10908 fffffa800ce45b00 POWERPNT.EXE 1 0 1 1<br />
0x16a8 0n5800 fffffa800dd7b700 POWERPNT.EXE 1 0 3 3<br />
0x2904 0n10500 fffffa800d905b00 POWERPNT.EXE 1 0 1 1<br />
0x2d58 0n11608 fffffa800747b490 POWERPNT.EXE 1 0 1 1<br />
0x2a18 0n10776 fffffa8009d93b00 CubeU.exe 3 0 0 1<br />
0x2ff8 0n12280 fffffa800714c370 SWClient.exe 1 0 2 4<br />
0x27dc 0n10204 fffffa80080c3b00 CubeU.exe 1 0 0 1<br />
0x17e8 0n6120 fffffa800db68b00 CARC.exe 1 0 1 1<br />
0xa48 0n2632 fffffa800cf726b0 CARCHMx64.exe 1 0 1 1<br />
0xf74 0n3956 fffffa80075d82d0 CARCHMx32.exe 1 0 1 1<br />
0x1870 0n6256 fffffa800a0dd480 syscfg64.exe 1 0 1 1<br />
0x884 0n2180 fffffa800824c060 TDepend.exe 1 0 1 2<br />
0x1b1c 0n6940 fffffa800d386aa0 TDepend64.exe 1 0 1 2<br />
0x2308 0n8968 fffffa800c4cdb00 TDepend64.exe 1 0 1 2<br />
0x2440 0n9280 fffffa800e3b5b00 TDepend64.exe 1 0 1 2<br />
0x2170 0n8560 fffffa8007e9b900 EXCEL.EXE 1 0 1 1<br />
0x27b0 0n10160 fffffa800d6fab00 notepad.exe 1 0 1 1<br />
0x2808 0n10248 fffffa800832e060 POWERPNT.EXE 1 0 1 1<br />
0x31b0 0n12720 fffffa80082645f0 iexplore.exe 1 0 1 1<br />
0x860 0n2144 fffffa800db47510 POWERPNT.EXE 1 0 1 1<br />
0x16b4 0n5812 fffffa800a079ad0 POWERPNT.EXE 1 0 1 1<br />
0x1970 0n6512 fffffa800e158b00 POWERPNT.EXE 1 0 1 1<br />
0x33b4 0n13236 fffffa800e213b00 POWERPNT.EXE 1 0 1 1<br />
0x33cc 0n13260 fffffa800ea2c060 POWERPNT.EXE 1 0 1 1<br />
0x242c 0n9260 fffffa800ad7f060 POWERPNT.EXE 1 0 1 1<br />
0x2d74 0n11636 fffffa800d2a1940 POWERPNT.EXE 1 0 1 1<br />
0x147c 0n5244 fffffa800ebd7480 EXCEL.EXE 1 0 1 1<br />
0x3230 0n12848 fffffa800d8b41b0 POWERPNT.EXE 1 0 1 1<br />
0x3228 0n12840 fffffa800e4d9b00 POWERPNT.EXE 1 0 1 1<br />
0x2450 0n9296 fffffa800abd45b0 POWERPNT.EXE 1 0 1 1<br />
0x1bbc 0n7100 fffffa800b55c9d0 CubeU.exe 4 0 0 1<br />
0x2f60 0n12128 fffffa800d7c68f0 CubeU.exe 4 0 0 1<br />
0x100 0n256 fffffa800e5ccb00 syscfgdy.exe 1 0 1 2<br />
0x3240 0n12864 fffffa800a319720 iexplore.exe 1 0 1 1<br />
0x2b7c 0n11132 fffffa800e29fb00 iexplore.exe 1 0 1 1<br />
0x1f10 0n7952 fffffa800e9cdb00 POWERPNT.EXE 1 0 3 3<br />
0x2fbc 0n12220 fffffa8009d4fb00 POWERPNT.EXE 1 0 1 1<br />
0x1ec0 0n7872 fffffa800c66b060 POWERPNT.EXE 1 0 1 1<br />
0x1be4 0n7140 fffffa8007db0b00 POWERPNT.EXE 1 0 1 1<br />
0xaf4 0n2804 fffffa800ea73b00 POWERPNT.EXE 1 0 1 1<br />
0x1a58 0n6744 fffffa800df86b00 POWERPNT.EXE 1 0 1 1<br />
0x23c8 0n9160 fffffa800d6c26f0 POWERPNT.EXE 1 0 1 1<br />
0x3130 0n12592 fffffa800d910300 software_reporter_tool.exe 1 0 0 1<br />
0x2698 0n9880 fffffa800c652060 V3Exec.exe 1 0 1 1<br />
0x3774 0n14196 fffffa8008164190 V3Exec.exe 1 0 1 1<br />
============== ================ ========================== === === =========== ============<br />
PID Address Name Ses Thd Obj Handles Obj Pointers</p>
<p>Priority:<br />
Current Base Decrement ForegroundBoost IO Page<br />
12 8 0 2 0 5</p>
<p># Child-SP Return Call Site<br />
0 fffff880147ff6c0 fffff80001a57f32 nt!KiSwapContext+0x7a<br />
1 fffff880147ff800 fffff80001a592b3 nt!KiCommitThreadWait+0x1d2<br />
2 fffff880147ff890 fffff80001d0b6bc nt!KeRemoveQueueEx+0x323<br />
3 fffff880147ff950 fffff80001a5d3c5 nt!IoRemoveIoCompletion+0x5c<br />
4 fffff880147ff9e0 fffff80001ac09d3 nt!NtWaitForWorkViaWorkerFactory+0x285<br />
5 fffff880147ffae0 000000007789b18a nt!KiSystemServiceCopyEnd+0x13<br />
0 000000001015fd98 0000000077a3fa9e ntdll_779f0000!ZwWaitForWorkViaWorkerFactory+0x12<br />
1 000000001015fda0 00000000774a343d ntdll_779f0000!TppWorkerThread+0x209<br />
2 000000001015fef0 0000000077a29802 kernel32!BaseThreadInitThunk+0xe<br />
3 000000001015fefc 0000000077a297d5 ntdll_779f0000!__RtlUserThreadStart+0x70<br />
4 000000001015ff3c 0000000000000000 ntdll_779f0000!_RtlUserThreadStart+0x1b</p>
<p>1: kd&gt; !cpu<br />
Process PID Thread Id Pri Base Pri Next CPU CSwitches User Kernel State Time Reason<br />
================ ==== ================ ==== === ======== ======== ========= ============ =============== ======= =============== =============<br />
Idle 0 fffff80001c141c0 0 16 0 0 553290675 0 2d.09:23:53.324 Running 3d.00:32:26.126 Executive<br />
MiniCtrl.exe 2924 fffffa800d9a9b50 1474 9 8 1 155 0 31ms Running 0 WrDispatchInt<br />
iexplore.exe *32 1d78 fffffa800da30b50 27ac 11 8 2 70840493 2h:38:23.643 37m:26.789 Running 0 WrUserRequest<br />
Idle 0 fffff8800210b140 0 16 0 3 539279526 0 2d.14:19:12.729 Running 3d.00:32:26.126 Executive</p>
<p>1: kd&gt; !mex.t fffffa800d9a9b50<br />
Process Thread CID TEB UserTime KernelTime ContextSwitches Wait Reason Time State<br />
MiniCtrl.exe (fffffa80095ed060) fffffa800d9a9b50 (E|K|W|R|V) 2924.1474 000007fffff7e000 0 31ms 155 WrDispatchInt 0 Running on processor 1</p>
<p>Priority:<br />
Current Base Decrement ForegroundBoost IO Page<br />
9 8 0 0 0 5</p>
<p># Child-SP Return Call Site<br />
0 fffff8801b90c358 fffff80001ac0d69 nt!KeBugCheckEx<br />
1 fffff8801b90c360 fffff80001ac047c nt!KiBugCheckDispatch+0x69<br />
2 fffff8801b90c4a0 fffff80001ab9cdd nt!KiSystemServiceHandler+0x7c<br />
3 fffff8801b90c4e0 fffff80001a3b445 nt!RtlpExecuteHandlerForException+0xd<br />
4 fffff8801b90c510 fffff80001b9984e nt!RtlDispatchException+0x415<br />
5 fffff8801b90cbf0 fffff80001ac0e42 nt!KiDispatchException+0x17e<br />
6 fffff8801b90d280 fffff80001abeb62 nt!KiExceptionDispatch+0xc2<br />
7 fffff8801b90d460 fffff80001dc87b8 nt!KiPageFault+0x422<br />
8 fffff8801b90d5f8 fffff80001e53b8d nt!ObpCaptureHandleInformation+0x68<br />
9 fffff8801b90d600 fffff80001e54267 nt!ExSnapShotHandleTables+0x10d<br />
a fffff8801b90d680 fffff80001edfaf5 nt!ObGetHandleInformation+0x37<br />
b fffff8801b90d6b0 fffff80001ef4e5b nt!ExpGetHandleInformation+0x55<br />
c fffff8801b90d6f0 fffff80001d6aa25 nt!ExpQuerySystemInformation+0x17eb<br />
d fffff8801b90daa0 fffff80001ac09d3 nt!NtQuerySystemInformation+0x4d<br />
e fffff8801b90dae0 0000000077899bea nt!KiSystemServiceCopyEnd+0x13<br />
f 000000000359ab88 000000014005708d ntdll!ZwQuerySystemInformation+0xa<br />
10 000000000359ab90 00000001400579f0 MiniCtrl+0x5708d<br />
11 000000000359abd0 000000014003a1c1 MiniCtrl+0x579f0<br />
12 000000000359b0f0 00000001400264ec MiniCtrl+0x3a1c1<br />
13 000000000359b130 0000000000000000 MiniCtrl+0x264ec</p>
<p>1: kd&gt; !mex.p 0xfffffa80095ed060<br />
Name Address Ses PID Parent PEB Create Time Mods Handle Thrd User Name<br />
============ ======================== === ============== ============== ================ ========================== ==== ====== ==== ===============<br />
MiniCtrl.exe fffffa80095ed060 (E|K|O) 1 2924 (0n10532) 2d90 (0n11664) 000007fffffd4000 01-15-2019 07:10:47.095 오후 81 277 24 HYNIXAD\2024974</p>
<p>Command Line: &#8220;C:\Windows\system32\MiniCtrl.exe&#8221; /L</p>
<p>Memory Details:</p>
<p>VM Peak Work Set Commit Size<br />
========= ========= ======== ===========<br />
145.35 MB 172.57 MB 34.88 MB 17.6 MB</p>
<p>0: kd&gt; lmvm minictrl<br />
start end module name<br />
00000001`40000000 00000001`405ec000 MiniCtrl (no symbols)<br />
Loaded symbol image file: MiniCtrl.exe<br />
Image path: C:\Windows\system32\MiniCtrl.exe<br />
Image name: MiniCtrl.exe<br />
Timestamp: Thu Dec 06 10:40:45 2018 (5C087E1D)<br />
CheckSum: 000EDA25<br />
ImageSize: 005EC000<br />
File version: 1.2.0.87<br />
Product version: 1.2.0.87<br />
File flags: 0 (Mask 3F)<br />
File OS: 4 Unknown Win32<br />
File type: 1.0 App<br />
File date: 00000000.00000000<br />
Translations: 0409.04b0<br />
CompanyName: ITM System<br />
ProductName: MiniCtrl Application<br />
InternalName: MiniCtrl<br />
OriginalFilename: MiniCtrl.EXE<br />
ProductVersion: 1.2.0.87<br />
FileVersion: 1.2.0.87<br />
FileDescription: MiniCtrl MFC Application<br />
LegalCopyright: Copyright (C) 2011 ITM Syste</p>
]]></content:encoded>
							<wfw:commentRss>https://github.com/appi77/myblog/si-technology/debug/debug%ec%82%ac%eb%a1%80-bsod-ntobpcapturehandleinformation/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
							</item>
		<item>
		<title>[DEBUG사례] ntdll_771d0000!RtlEnterCriticalSection</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/debug%ec%82%ac%eb%a1%80-ntdll_771d0000rtlentercriticalsection/</link>
				<pubDate>Mon, 25 Feb 2019 01:37:38 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=570</guid>
				<description><![CDATA[▶ 실제 사례 &#62; !dml_proc DbgId PID Image file name 0 cbd4 C:\Program Files (x86)\Notepad++\notepad++.exe &#62; !runaway User Mode Time Thread Time 0:c628 0 days 0:00:00.374 10:c994 0 days 0:00:00.015 11:c470 0 days 0:00:00.000 9:c8dc&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<h4 align="left"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </span><span lang="EN-US">실제 사례</span></h4>
<p>&gt; !dml_proc<br />
DbgId PID Image file name<br />
0 cbd4 <span style="color: #0000ff;"><em>C:\Program Files (x86)\Notepad++\notepad++.exe</em></span></p>
<p>&gt; !runaway<br />
User Mode Time<br />
Thread Time<br />
0:c628 0 days 0:00:00.374<br />
10:c994 0 days 0:00:00.015<br />
11:c470 0 days 0:00:00.000<br />
9:c8dc 0 days 0:00:00.000<br />
8:c4b0 0 days 0:00:00.000<br />
7:c888 0 days 0:00:00.000<br />
6:ca84 0 days 0:00:00.000<br />
5:ca60 0 days 0:00:00.000<br />
4:c130 0 days 0:00:00.000<br />
3:ca64 0 days 0:00:00.000<br />
2:c16c 0 days 0:00:00.000<br />
1:cbd0 0 days 0:00:00.000</p>
<p>&gt; !analyze -v -hang<br />
STACK_COMMAND: ~14s ; kb<br />
BUCKET_ID: X64_HANG<br />
FAILURE_BUCKET_ID: APPLICATION_HANG_cfffffff_Unknown_Image!Unknown</p>
<p>&gt; ~14s ; kb<br />
00000000`74792bf1 : 00000000`75f372b9 00000000`ffff0023 00000000`00000246 00000000`07cf7f1c : <span style="color: #0000ff;">wow64cpu!CpupSyscallStub</span>+0x9<br />
00000000`7480d286 : 00000000`00000000 00000000`74791904 00000000`00000000 00000000`7480d286 : <span style="color: #0000ff;">wow64cpu!Thunk0ArgReloadState</span>+0x23<br />
&#8230;..</p>
<p>&gt; !wow64exts.sw<br />
Switched to 32bit mode</p>
<p>0:014:x86&gt; kb<br />
ChildEBP RetAddr Args to Child<br />
07cf7068 7721ebf6 000010c0 00000000 00000000 ntdll_771d0000!ZwWaitForSingleObject+0x15<br />
07cf70cc 7721eada 00000000 00000000 07cf8eec ntdll_771d0000!RtlpWaitOnCriticalSection+0x13e<br />
07cf70f4 10062647 <span style="color: #ff0000;"><strong>100d0078</strong></span> 7d9a68e8 000c1b60 ntdll_771d0000!<span style="color: #ff0000;"><strong>RtlEnterCriticalSection</strong></span>+0x150<br />
WARNING: Stack unwind information not available. Following frames may be wrong.<br />
07cf7b44 10065a66 7d9a6c28 000c1b60 07cf8eec SPF!ExitThreadHook+0x46507<br />
07cf7f84 10037629 07cf8eec 100891ec 07cf8eec SPF!ExitThreadHook+0x49926<br />
07cf83d8 100378f2 000c1b60 0e132748 07cf8eec SPF!ExitThreadHook+0x1b4e9<br />
07cf83f8 10029f0b 000c1b60 0000004b 0000003b SPF!ExitThreadHook+0x1b7b2<br />
07cfa7b0 1002c4cc 002516ec 00000016 07cfc21c SPF!ExitThreadHook+0xddcb<br />
07cfc1f0 1001b111 07cfc21c 00000000 100ce940 SPF!ExitThreadHook+0x1038c<br />
07cfc870 75f47451 00000000 00000001 07cfc934 SPF!CheckAttachType+0xd31<br />
07cfc88c 75f380a9 00030000 00000001 07cfc934 user32!DispatchHookW+0x38<br />
07cfc8cc 75f38ba1 07cfc924 07cfc934 07cfc950 user32!CallHookWithSEH+0x21<br />
07cfc90c 771e013a 07cfc924 00000000 07cfca1c user32!__fnHkINLPMSG+0x75<br />
07cfc954 64921430 07cfc9d8 00000000 00000000 ntdll_771d0000!KiUserCallbackDispatcher+0x2e<br />
07cfc990 649214e9 07cfc9d8 00000000 00000000 duser!CoreSC::xwProcessNL+0xfb<br />
07cfc9b8 75f7fd3b 07cfc9d8 00000000 00000000 duser!MphProcessMessage+0x5e<br />
07cfca0c 771e013a 07cfca24 00000000 07cfe854 user32!__ClientGetMessageMPH+0x34<br />
07cfca38 75f40703 07cfcab4 00000000 00000000 ntdll_771d0000!KiUserCallbackDispatcher+0x2e<br />
07cfca60 75f40769 07cfcab4 00000000 00000000 user32!_PeekMessage+0x88<br />
07cfca8c 75f5d7ee 07cfcab4 00000000 00000000 user32!PeekMessageW+0x108<br />
07cfcadc 75f5da5c 002516ec 001f19ba 00000008 user32!DialogBox2+0xfc<br />
07cfcb08 75f5d98a 75b80000 0dff0b58 001f19ba user32!InternalDialogBox+0xe5<br />
07cfcb28 75f5d70e 75b80000 0dff0b58 001f19ba user32!DialogBoxIndirectParamAorW+0x37<br />
07cfcb48 75b8597b 75b80000 0dff0b58 001f19ba user32!DialogBoxIndirectParamW+0x1b<br />
07cfcb94 6de7011a 0dff0b58 001f19ba 6495e610 comdlg32!CFileOpenSave::Show+0x181<br />
07cfcbbc 531d56dc 54c93509 04363758 07cfe918 mfc90u!CFileDialog::DoModal+0xc5<br />
07cfcc40 746d3c1b 06730000 00000000 746d3c3a JECM+0x56dc<br />
07cfcc8c 6de4b325 04354e78 04356204 6de43b6b msvcr90!free+0xcd<br />
07cfcc98 6de43b6b 04354e78 64959275 54c93352 mfc90u!CMemFile::Free+0xe<br />
07cfccac 64959296 0673ebf0 07cfcca4 00750051 mfc90u!ATL::CStringData::Release+0x17<br />
07cfccb0 0673ebf0 07cfcca4 00750051 6ddfee64 duser!JLog::Printf+0x166<br />
07cfccb4 07cfcca4 00750051 6ddfee64 00000002 0x673ebf0<br />
07cfccb8 00750051 6ddfee64 00000002 00000000 0x7cfcca4<br />
07cfccbc 6ddfee64 00000002 00000000 00000000 0x750051<br />
07cfccc0 00000000 00000000 00000000 00000000 mfc90u!CFileDialog::`vftable&#8217;</p>
<p>0:014:x86&gt; !cs <strong><span style="color: #ff0000;">100d0078</span></strong><br />
&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211;<br />
Critical section = 0x00000000100d0078 (<span style="color: #ff0000;">SPF!ExitThreadHook+0xB3F38</span>)<br />
DebugInfo = 0x000000000726d640<br />
LOCKED<br />
LockCount = 0xFFFFFFFF<br />
WaiterWoken = Yes<br />
OwningThread = 0x00000000000010c0<br />
RecursionCount = 0x3004<br />
LockSemaphore = 0x0<br />
SpinCount = 0x0000000000000000</p>
]]></content:encoded>
										</item>
		<item>
		<title>[DEBUG사례] Unrecognized configuration section appSettings</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/%ec%9d%b8%ec%8b%9d%ed%95%a0-%ec%88%98-%ec%97%86%eb%8a%94-%ea%b5%ac%ec%84%b1-%ec%84%b9%ec%85%98-startup%ec%9e%85%eb%8b%88%eb%8b%a4/</link>
				<pubDate>Fri, 22 Feb 2019 08:07:18 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=566</guid>
				<description><![CDATA[▶ 실제 사례 0:000&#62; !analyze -v ******************************************************************************* * * * Exception Analysis * * * ******************************************************************************* FAULTING_IP: KERNELBASE!RaiseException+58 7704c54f c9 leave EXCEPTION_RECORD: (.exr -1) ExceptionAddress: 7704c54f (KERNELBASE!RaiseException+0x00000058) ExceptionCode: e0434f4d (CLR exception) ExceptionFlags: 00000001 NumberParameters: 1&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<h4 align="left"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </span><span lang="EN-US">실제 사례</span></h4>
<p>0:000&gt; !analyze -v<br />
*******************************************************************************<br />
* *<br />
* Exception Analysis *<br />
* *<br />
*******************************************************************************</p>
<p>FAULTING_IP:<br />
KERNELBASE!RaiseException+58<br />
7704c54f c9 leave</p>
<p>EXCEPTION_RECORD: (.exr -1)<br />
ExceptionAddress: 7704c54f (KERNELBASE!RaiseException+0x00000058)<br />
ExceptionCode: e0434f4d (CLR exception)<br />
ExceptionFlags: 00000001<br />
NumberParameters: 1<br />
Parameter[0]: 80131902</p>
<p>FAULTING_THREAD: 000032e0</p>
<p>PROCESS_NAME: CubeDisk.exe</p>
<p>ERROR_CODE: (NTSTATUS) 0xe0434f4d &#8211; &lt;Unable to get error code text&gt;</p>
<p>EXCEPTION_CODE: (HRESULT) 0x80131902 (2148735234) &#8211; &lt;Unable to get error code text&gt;</p>
<p>EXCEPTION_PARAMETER1: 80131902</p>
<p>NTGLOBALFLAG: 70</p>
<p>APPLICATION_VERIFIER_FLAGS: 0</p>
<p>APP: SmartDisk.exe</p>
<p>ANALYSIS_VERSION: 10.0.10075.9 x86fre</p>
<p>MANAGED_CODE: 1</p>
<p>MANAGED_ENGINE_MODULE: mscorwks</p>
<p>MANAGED_ANALYSIS_PROVIDER: SOS</p>
<p>MANAGED_THREAD_ID: 32e0</p>
<p>MANAGED_EXCEPTION_ADDRESS: 2481d24</p>
<p>LAST_CONTROL_TRANSFER: from 00000000 to 6e48fbb4</p>
<p>BUGCHECK_STR: CLR_EXCEPTION_System.Configuration.ConfigurationErrorsException</p>
<p>DEFAULT_BUCKET_ID: CLR_EXCEPTION_System.Configuration.ConfigurationErrorsException</p>
<p>STACK_TEXT:<br />
003ceba0 6e3e1930 system_configuration_ni!System.Configuration.ClientConfigurationSystem.EnsureInit+0x210<br />
003cec54 6e3e3850 system_configuration_ni!System.Configuration.ClientConfigurationSystem.PrepareClientConfigSystem+0x20<br />
003cec60 6e459b3a system_configuration_ni!System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.RefreshConfig+0x12<br />
003cec70 6e4599c9 system_configuration_ni!System.Configuration.ConfigurationManager.RefreshSection+0x51<br />
003cec7c 6f3903ef system_ni!System.Configuration.ClientSettingsStore.ReadSettings+0x8f<br />
003cecbc 6f36aaf0 system_ni!System.Configuration.LocalFileSettingsProvider.GetPropertyValues+0x60<br />
003ced10 6f36a9b3 system_ni!System.Configuration.SettingsBase.GetPropertiesFromProvider+0x103<br />
003ced4c 6f38f9f5 system_ni!System.Configuration.SettingsBase.GetPropertyValueByName+0x85<br />
003ced60 6f38f91b system_ni!System.Configuration.SettingsBase.get_Item+0x3b<br />
003ced90 6f38f7a7 system_ni!System.Configuration.ApplicationSettingsBase.GetPropertyValue+0x37<br />
003ceda4 6f38f71b system_ni!System.Configuration.ApplicationSettingsBase.get_Item+0x3b<br />
003cedd4 00980857 cubedisk!CubeDisk.Properties.Settings.get_UPGRADE_CHECK+0xf<br />
003cede0 00980219 cubedisk!CubeDisk.Program.Main+0x49</p>
<p>FOLLOWUP_IP:<br />
+0<br />
00980857 8bf0 mov esi,eax</p>
<p>SYMBOL_STACK_INDEX: b</p>
<p>SYMBOL_NAME: cubedisk!CubeDisk.Properties.Settings.get_UPGRADE_CHECK+f</p>
<p>FOLLOWUP_NAME: MachineOwner</p>
<p>MODULE_NAME: cubedisk</p>
<p>IMAGE_NAME: CubeDisk.exe</p>
<p>DEBUG_FLR_IMAGE_TIMESTAMP: 0</p>
<p>STACK_COMMAND: ** Pseudo Context ** ; kb</p>
<p>BUCKET_ID: CLR_EXCEPTION_System.Configuration.ConfigurationErrorsException_cubedisk!CubeDisk.Properties.Settings.get_UPGRADE_CHECK+f</p>
<p>PRIMARY_PROBLEM_CLASS: CLR_EXCEPTION_System.Configuration.ConfigurationErrorsException_cubedisk!CubeDisk.Properties.Settings.get_UPGRADE_CHECK+f</p>
<p>FAILURE_PROBLEM_CLASS: CLR_EXCEPTION_System.Configuration.ConfigurationErrorsException</p>
<p>FAILURE_EXCEPTION_CODE: 80131902</p>
<p>FAILURE_IMAGE_NAME: CubeDisk.exe</p>
<p>FAILURE_FUNCTION_NAME: CubeDisk.Properties.Settings.get_UPGRADE_CHECK</p>
<p>FAILURE_SYMBOL_NAME: CubeDisk.exe!CubeDisk.Properties.Settings.get_UPGRADE_CHECK</p>
<p>FAILURE_BUCKET_ID: CLR_EXCEPTION_System.Configuration.ConfigurationErrorsException_80131902_CubeDisk.exe!CubeDisk.Properties.Settings.get_UPGRADE_CHECK</p>
<p>ANALYSIS_SOURCE: UM</p>
<p>FAILURE_ID_HASH_STRING: um:clr_exception_system.configuration.configurationerrorsexception_80131902_SmartDisk.exe!cubedisk.properties.settings.get_upgrade_check</p>
<p>FAILURE_ID_HASH: {795f2366-b1b6-836e-4122-f5d3514a6ec8}</p>
<p>Followup: MachineOwner<br />
&#8212;&#8212;&#8212;</p>
<p>0:000&gt; !pe<br />
Exception object: 02481d24<br />
Exception type: System.Configuration.ConfigurationErrorsException<br />
Message: 구성 시스템을 초기화하지 못했습니다.<br />
InnerException: System.Configuration.ConfigurationErrorsException, use !PrintException 02481a7c to see more<br />
StackTrace (generated):<br />
SP IP Function<br />
003CEBA0 6E3E1930 System_Configuration_ni!System.Configuration.ClientConfigurationSystem.EnsureInit(System.String)+0x210<br />
003CEC54 6E3E3850 System_Configuration_ni!System.Configuration.ClientConfigurationSystem.PrepareClientConfigSystem(System.String)+0x20<br />
003CEC60 6E459B3A System_Configuration_ni!System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.RefreshConfig(System.String)+0x12<br />
003CEC70 6E4599C9 System_Configuration_ni!System.Configuration.ConfigurationManager.RefreshSection(System.String)+0x51<br />
003CEC7C 6F3903EF System_ni!System.Configuration.ClientSettingsStore.ReadSettings(System.String, Boolean)+0x8f<br />
003CECBC 6F36AAF0 System_ni!System.Configuration.LocalFileSettingsProvider.GetPropertyValues(System.Configuration.SettingsContext, System.Configuration.SettingsPropertyCollection)+0x60<br />
003CED10 6F36A9B3 System_ni!System.Configuration.SettingsBase.GetPropertiesFromProvider(System.Configuration.SettingsProvider)+0x103<br />
003CED4C 6F38F9F5 System_ni!System.Configuration.SettingsBase.GetPropertyValueByName(System.String)+0x85<br />
003CED60 6F38F91B System_ni!System.Configuration.SettingsBase.get_Item(System.String)+0x3b<br />
003CED90 6F38F7A7 System_ni!System.Configuration.ApplicationSettingsBase.GetPropertyValue(System.String)+0x37<br />
003CEDA4 6F38F71B System_ni!System.Configuration.ApplicationSettingsBase.get_Item(System.String)+0x3b<br />
003CEDD4 00980857 CubeDisk!CubeDisk.Properties.Settings.get_UPGRADE_CHECK()+0xf<br />
003CEDE0 00980219 CubeDisk!CubeDisk.Program.Main(System.String[])+0x49</p>
<p>StackTraceString: &lt;none&gt;<br />
HResult: 80131902<br />
There are nested exceptions on this thread. Run with -nested for details<br />
0:000&gt; !do 02481d24<br />
Name: System.Configuration.ConfigurationErrorsException<br />
MethodTable: 6e3f6ae4<br />
EEClass: 6e3c288c<br />
Size: 92(0x5c) bytes<br />
(C:\Windows\assembly\GAC_MSIL\System.Configuration\2.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll)<br />
Fields:<br />
MT Field Offset Type VT Attr Value Name<br />
701d0f1c 40000b5 4 System.String 0 instance 00000000 _className<br />
701d0390 40000b6 8 &#8230;ection.MethodBase 0 instance 00000000 _exceptionMethod<br />
701d0f1c 40000b7 c System.String 0 instance 00000000 _exceptionMethodString<br />
701d0f1c 40000b8 10 System.String 0 instance 02481dd0 _message<br />
701ca878 40000b9 14 &#8230;tions.IDictionary 0 instance 00000000 _data<br />
701d10b0 40000ba 18 System.Exception 0 instance 02481a7c _innerException<br />
701d0f1c 40000bb 1c System.String 0 instance 00000000 _helpURL<br />
701d0b38 40000bc 20 System.Object 0 instance 02481fa4 _stackTrace<br />
701d0f1c 40000bd 24 System.String 0 instance 00000000 _stackTraceString<br />
701d0f1c 40000be 28 System.String 0 instance 00000000 _remoteStackTraceString<br />
701d3168 40000bf 34 System.Int32 1 instance 0 _remoteStackIndex<br />
701d0b38 40000c0 2c System.Object 0 instance 00000000 _dynamicMethods<br />
701d3168 40000c1 38 System.Int32 1 instance -2146232062 _HResult<br />
701d0f1c 40000c2 30 System.String 0 instance 00000000 _source<br />
701d37e4 40000c3 3c System.IntPtr 1 instance 0 _xptrs<br />
701d3168 40000c4 40 System.Int32 1 instance -532459699 _xcode<br />
701d0f1c 400317e 44 System.String 0 instance 00000000 _filename<br />
701d3168 400317f 48 System.Int32 1 instance 0 _line<br />
701d0f1c 4000254 4c System.String 0 instance 00000000 _firstFilename<br />
701d3168 4000255 54 System.Int32 1 instance 0 _firstLine<br />
701a46ec 4000256 50 System.Object[] 0 instance 00000000 _errors<br />
0:000&gt; !do 02481a7c<br />
Name: System.Configuration.ConfigurationErrorsException<br />
MethodTable: 6e3f6ae4<br />
EEClass: 6e3c288c<br />
Size: 92(0x5c) bytes<br />
(C:\Windows\assembly\GAC_MSIL\System.Configuration\2.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll)<br />
Fields:<br />
MT Field Offset Type VT Attr Value Name<br />
701d0f1c 40000b5 4 System.String 0 instance 00000000 _className<br />
701d0390 40000b6 8 &#8230;ection.MethodBase 0 instance 00000000 _exceptionMethod<br />
701d0f1c 40000b7 c System.String 0 instance 00000000 _exceptionMethodString<br />
701d0f1c 40000b8 10 System.String 0 instance 02480e68 _message<br />
701ca878 40000b9 14 &#8230;tions.IDictionary 0 instance 00000000 _data<br />
701d10b0 40000ba 18 System.Exception 0 instance 00000000 _innerException<br />
701d0f1c 40000bb 1c System.String 0 instance 00000000 _helpURL<br />
701d0b38 40000bc 20 System.Object 0 instance 02481cb8 _stackTrace<br />
701d0f1c 40000bd 24 System.String 0 instance 00000000 _stackTraceString<br />
701d0f1c 40000be 28 System.String 0 instance 00000000 _remoteStackTraceString<br />
701d3168 40000bf 34 System.Int32 1 instance 0 _remoteStackIndex<br />
701d0b38 40000c0 2c System.Object 0 instance 00000000 _dynamicMethods<br />
701d3168 40000c1 38 System.Int32 1 instance -2146232062 _HResult<br />
701d0f1c 40000c2 30 System.String 0 instance 00000000 _source<br />
701d37e4 40000c3 3c System.IntPtr 1 instance 0 _xptrs<br />
701d3168 40000c4 40 System.Int32 1 instance -532459699 _xcode<br />
701d0f1c 400317e 44 System.String 0 instance 00000000 _filename<br />
701d3168 400317f 48 System.Int32 1 instance 0 _line<br />
701d0f1c 4000254 4c System.String 0 instance 02449fec _firstFilename<br />
701d3168 4000255 54 System.Int32 1 instance 8 _firstLine<br />
701a46ec 4000256 50 System.Object[] 0 instance 00000000 _errors<br />
0:000&gt; !do 02480e68<br />
Name: System.String<br />
MethodTable: 701d0f1c<br />
EEClass: 6ff8d66c<br />
Size: 78(0x4e) bytes<br />
(C:\Windows\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll)<br />
String: 인식할 수 없는 구성 섹션 startup입니다.<br />
Fields:<br />
MT Field Offset Type VT Attr Value Name<br />
701d3168 4000096 4 System.Int32 1 instance 31 m_arrayLength<br />
701d3168 4000097 8 System.Int32 1 instance 26 m_stringLength<br />
701d1bfc 4000098 c System.Char 1 instance ffffc778 m_firstChar<br />
701d0f1c 4000099 10 System.String 0 shared static Empty<br />
&gt;&gt; Domain:Value 00113ac8:02441198 &lt;&lt;<br />
701d1b4c 400009a 14 System.Char[] 0 shared static WhitespaceChars<br />
&gt;&gt; Domain:Value 00113ac8:02441954 &lt;&lt;</p>
<p>C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG\machine.config 파일에 start 섹션에 잘못된 항목이 있음을 나타냅니다 . 따라서 잘 작동하는 PC에서 machine.config 파일의 appSettings 섹션을 비교해 보세요.<br />
예)<br />
&lt;section name=&#8221;startup&#8221; type=&#8221;System.Configuration.IgnoreSection, System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&#8221; allowLocation=&#8221;false&#8221;/&gt;</p>
]]></content:encoded>
										</item>
		<item>
		<title>windbg &#8211; MEX Debugging Extension</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/windbg-mex-debugging-extension/</link>
				<pubDate>Thu, 31 Jan 2019 07:50:39 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=537</guid>
				<description><![CDATA[MEX Debugging Extension ; https://www.microsoft.com/en-us/download/details.aspx?id=53304 windbg 설치 디렉토리 아래 winext 폴더에 mex.dll을 복사 .load mex.dll 또는 .load C:\MyUtil\WindbgENV\mex\x64\mex.dll !mex.help]]></description>
								<content:encoded><![CDATA[<p>MEX Debugging Extension ; <a href="https://www.microsoft.com/en-us/download/details.aspx?id=53304" target="tab">https://www.microsoft.com/en-us/download/details.aspx?id=53304</a></p>
<p>windbg 설치 디렉토리 아래 winext 폴더에 mex.dll을 복사<br />
.load mex.dll<br />
또는<br />
.load C:\MyUtil\WindbgENV\mex\x64\mex.dll</p>
<p>!mex.help</p>
]]></content:encoded>
										</item>
		<item>
		<title>windbg &#8211; x64 SOS 확장</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/windbg-x64-sos-%ed%99%95%ec%9e%a5/</link>
				<pubDate>Fri, 23 Nov 2018 07:47:46 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=476</guid>
				<description><![CDATA[▶ 32비트 툴로 덤프받았는지 확인 64비트 머신에서 32비트 프로세스 덤프를 제대로 받았는지 확인 크래시 덤프를로드 한 후 필요한 버전을 확인 합니다. &#62;!peb &#8230; 중략 PROCESSOR_ARCHITECTURE=AMD64 이렇게 나오면 잘못된것임 PROCESSOR_ARCHITECTURE=x86 PROCESSOR_ARCHITEW6432=AMD64 이렇게 나오면 정상 64비트 윈도우에서&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<p><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /></span> 32비트 툴로 덤프받았는지 확인</p>
<p>64비트 머신에서 32비트 프로세스 덤프를 제대로 받았는지 확인<br />
크래시 덤프를로드 한 후 필요한 버전을 확인 합니다.<br />
&gt;!peb<br />
&#8230; 중략<br />
PROCESSOR_ARCHITECTURE=AMD64<br />
이렇게 나오면 잘못된것임<br />
PROCESSOR_ARCHITECTURE=x86<br />
PROCESSOR_ARCHITEW6432=AMD64<br />
이렇게 나오면 정상</p>
<p>64비트 윈도우에서 32비트 프로세스의 덤프를 받기위해서<br />
C:\Windows\SysWOW64\Taskmgr.exe<br />
을 사용합니다.</p>
<p><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /></span> 크래시 덤프 .NET버전 확인</p>
<p>덤프를 분석하는 PC와 .NET버전이 다를 경우<br />
크래시 덤프를로드 한 후 필요한 버전을 확인 합니다.<br />
&gt;lm vm clr</p>
<p>.NET 3.5 이하에서는<br />
&gt;lm vm mscorwks<br />
FileVersion: 2.0.50727.8762</p>
<p>이 버전이 포함 된 MS 업데이트를위한 google :<br />
sos.dll 2.0.50727.8762<br />
해당 파일을 확보한다.</p>
<p>&gt;cordll -ve -u -l<br />
CLRDLL: C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscordacwks.dll:2.0.50727.9035 f:0<br />
doesn&#8217;t match desired version 2.0.50727.8762 f:0<br />
CLRDLL: Loaded DLL \\xxx.xxx.xxx.xxx\ossymbols\mscordacwks_x86_x86_2.0.50727.8762.dll\58E464915b0000\mscordacwks_x86_x86_2.0.50727.8762.dll<br />
Automatically loaded SOS Extension<br />
CLR DLL status: Loaded DLL \\xxx.xxx.xxx.xxx\ossymbols\mscordacwks_x86_x86_2.0.50727.8762.dll\58E464915b0000\mscordacwks_x86_x86_2.0.50727.8762.dll</p>
<p><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /></span> windbg 6.12에서 sos.dll 및 mscordacwks.dll 적용방법</p>
<p>windbg를 새로 실행하거나<br />
Debug-&gt;Detach Debuggee / File-&gt;Clear Workspace(clear all) 후 Open Crash Dump..를 통해 덤프파일을 열기 한다.<br />
&gt; !sym noisy<br />
&gt; .load C:\windbg\sos\sos.2.0.50727.8784.dll</p>
<p>&gt; !clrstack<br />
~OSSymbols\mscordacwks_AMD64_x86_2.0.50727.8784.dll\5AB42E295b0000\mscordacwks_AMD64_x86_2.0.50727.8784.dll not found<br />
경로에 파일을 찾을 수 없다고 한다.<br />
mscordacwks.dll 을 mscordacwks_AMD64_x86_2.0.50727.8784.dll로 수정해서 해당 경로에 복사한다.</p>
<p>처음부터 다시 반복하면 오류없이 sos.dll이 load 된다.</p>
<p>&gt;.reload</p>
<p><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /></span> windbg &#8220;.loadby sos&#8221; 명령어<br />
.NET 4.0 응용 프로그램을 디버깅할 때<br />
0:000&gt; .loadby sos clr<br />
.NET 3.5 이하 응용 프로그램을 디버깅할 때<br />
0:000&gt; .loadby sos mscorwks</p>
<p>0:000&gt; !clrstack<br />
SOS does not support the current target architecture.<br />
이땐 다음 명령어로 확인 해본다<br />
<span style="font-size: 1rem;">0:000&gt; .chain</p>
<p>Extension DLL search Path:<br />
C:\Program Files (x86)\Windows Kits\10\Debuggers\x86\WINXP;C:\Program Files (x86)\Win~<br />
Extension DLL chain:<br />
C:\Windows\Microsoft.NET\Framework\v2.0.50727\sos: image 2.0.50727.9035, API 1.0.0, built Wed Aug 29 21:02:45 2018<br />
[path: C:\Windows\Microsoft.NET\Framework\v2.0.50727\sos.dll]<br />
\\xxx.xxx.xxx.xxx\ossymbols\SOS_x86_x86_2.0.50727.8762.dll\58E464915b0000\SOS_x86_x86_2.0.50727.8762.dll: image 2.0.50727.8762, API 1.0.0, built Tue Apr 4 20:41:39 2017<br />
[path: \\xxx.xxx.xxx.xxx\ossymbols\SOS_x86_x86_2.0.50727.8762.dll\58E464915b0000\SOS_x86_x86_2.0.50727.8762.dll]<br />
dbghelp: image 10.0.17763.132, API 10.0.6,<br />
[path: C:\Program Files (x86)\Windows Kits\10\Debuggers\x86\dbghelp.dll]<br />
ext: image 10.0.17763.132, API 1.0.0,<br />
[path: C:\Program Files (x86)\Windows Kits\10\Debuggers\x86\winext\ext.dll]<br />
exts: image 10.0.17763.132, API 1.0.0,<br />
[path: C:\Program Files (x86)\Windows Kits\10\Debuggers\x86\WINXP\exts.dll]<br />
uext: image 10.0.17763.132, API 1.0.0,<br />
[path: C:\Program Files (x86)\Windows Kits\10\Debuggers\x86\winext\uext.dll]<br />
ntsdexts: image 10.0.17763.132, API 1.0.0,<br />
[path: C:\Program Files (x86)\Windows Kits\10\Debuggers\x86\WINXP\ntsdexts.dll]</p>
<p></span></p>
<p><span style="font-size: 1rem;">0:000&gt;!pe         =&gt; sos !PrintException을 확인 할 수 있음</span></p>
]]></content:encoded>
										</item>
		<item>
		<title>WinDbg 사례</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/windbg-%ec%82%ac%eb%a1%80/</link>
				<pubDate>Tue, 30 Oct 2018 05:27:23 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=438</guid>
				<description><![CDATA[0:000&#62; !analyze -v ******************************************************************************* * * * Exception Analysis * * * ******************************************************************************* *** WARNING: symbols timestamp is wrong 0x5b079867 0x5b0791e3 for mshtml.dll *** WARNING: Unable to verify checksum for System.Windows.Forms.ni.dll *** WARNING: symbols&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<p>0:000&gt; <span style="color: #0000ff;">!analyze -v</span></p>
<pre>*******************************************************************************
* *
* Exception Analysis *
* *
*******************************************************************************

*** WARNING: symbols timestamp is wrong 0x5b079867 0x5b0791e3 for mshtml.dll
*** WARNING: Unable to verify checksum for System.Windows.Forms.ni.dll
*** WARNING: symbols timestamp is wrong 0x4a5be036 0x4a5bdadf for rasman.dll
*** WARNING: symbols timestamp is wrong 0x4a5be0b0 0x4ce7ba42 for winmm.dll
*** ERROR: Symbol file could not be found. Defaulted to export symbols for MKW_M.dll -
*** WARNING: symbols timestamp is wrong 0x5a4db72e 0x5a4db715 for SPF_M.dll
*** ERROR: Symbol file could not be found. Defaulted to export symbols for SPF_M.dll -
*** WARNING: symbols timestamp is wrong 0x5b90f1b6 0x5b90f198 for SPF.dll
*** ERROR: Symbol file could not be found. Defaulted to export symbols for SPF.dll -
Failed calling InternetOpenUrl, GLE=12002

FAULTING_IP:
+c7827e0
00000000`00000000 ?? ???

EXCEPTION_RECORD: ffffffffffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 0000000000000000
ExceptionCode: 80000003 (Break instruction exception)
ExceptionFlags: 00000000
NumberParameters: 0

FAULTING_THREAD: 0000000000001d34

PROCESS_NAME: CubeDisk.exe

OVERLAPPED_MODULE: Address regions for 'DWrite' and 'msls31' overlap

ERROR_CODE: <span style="color: #ff0000;"><strong>(NTSTATUS) 0x80000003</strong></span> - {

EXCEPTION_CODE: (HRESULT) 0x80000003 (2147483651) - .

MOD_LIST: &lt;ANALYSIS/&gt;

NTGLOBALFLAG: 0

APPLICATION_VERIFIER_FLAGS: 0

MANAGED_STACK: !dumpstack -EE
No export dumpstack found

ADDITIONAL_DEBUG_TEXT: Followup set based on attribute [Is_ChosenCrashFollowupThread] from Frame:[0] on thread:[PSEUDO_THREAD]

LAST_CONTROL_TRANSFER: from 0000000074792dbf to 0000000074792e09

BUGCHECK_STR: APPLICATION_FAULT_STACKIMMUNE_NOSOS

PRIMARY_PROBLEM_CLASS: STACKIMMUNE

DEFAULT_BUCKET_ID: STACKIMMUNE

STACK_TEXT:
00000000`00000000 00000000`00000000 SmartDisk.exe+0x0

SYMBOL_NAME: SmartDisk.exe

FOLLOWUP_NAME: wintriage

MODULE_NAME: cubedisk

IMAGE_NAME: CubeDisk.exe

DEBUG_FLR_IMAGE_TIMESTAMP: 5b6831d7

STACK_COMMAND: ** Pseudo Context ** ; kb

FAILURE_BUCKET_ID: STACKIMMUNE_80000003_CubeDisk.exe!Unknown

BUCKET_ID: X64_APPLICATION_FAULT_STACKIMMUNE_NOSOS_SmartDisk.exe

FOLLOWUP_IP:
CubeDisk!.ctor+0 [D:\CubeDisk_18-09-27\CubeDisk\HttpBusiness.cs @ 24]
00000000`002d0000 4d5a pop r10

WATSON_STAGEONE_URL: http://watson.microsoft.com/StageOne/CubeDisk_exe/1_0_0_0/5b6831d7/unknown/0_0_0_0/bbbbbbb4/80000003/00000000.htm?Retriage=1

Followup: wintriage
---------</pre>
<p><span style="color: #ff0000;"><strong>(NTSTATUS) 0x80000003 강제로 덤프를 실행할 경우 발생함 hang이 발생한 곳을 찾기 위해 다음과 같이 실행</strong></span></p>
<p>0:000&gt; <span style="color: #0000ff;">!analyze -v -hang</span></p>
<pre>*******************************************************************************
* *
* Exception Analysis *
* *
*******************************************************************************

Failed calling InternetOpenUrl, GLE=12002

FAULTING_IP:
+c5a7c60
00000000`00000000 ?? ???

EXCEPTION_RECORD: ffffffffffffffff -- (.exr 0xffffffffffffffff)
ExceptionAddress: 0000000000000000
ExceptionCode: 80000003 (Break instruction exception)
ExceptionFlags: 00000000
NumberParameters: 0

<span style="color: #000000;">FAULTING_THREAD: 000000000000000e</span>

BUGCHECK_STR: HANG

DEFAULT_BUCKET_ID: APPLICATION_HANG

PROCESS_NAME: CubeDisk.exe

OVERLAPPED_MODULE: Address regions for 'DWrite' and 'msls31' overlap

ERROR_CODE: (NTSTATUS) 0xcfffffff - &lt;Unable to get error code text&gt;

EXCEPTION_CODE: (NTSTATUS) 0xcfffffff - &lt;Unable to get error code text&gt;

MOD_LIST: &lt;ANALYSIS/&gt;

NTGLOBALFLAG: 0

APPLICATION_VERIFIER_FLAGS: 0

MANAGED_STACK: !dumpstack -EE
No export dumpstack found

DERIVED_WAIT_CHAIN:

Dl Eid Cid WaitType
-- --- ------- --------------------------
0 1d28.1d34 Speculated (Triage) --&gt;
14 1d28.2a58 Unknown

<span style="color: #0000ff;">WAIT_CHAIN_COMMAND: ~0s;k;;~14s;k;;</span>

<span style="color: #ff0000;">BLOCKING_THREAD: 0000000000002a58</span>

PRIMARY_PROBLEM_CLASS: APPLICATION_HANG

LAST_CONTROL_TRANSFER: from 0000000074792bf1 to 0000000074792e09

STACK_TEXT:

00000000`0393be38 00000000`74792bf1 : 00000000`75f372b9 00000000`ffff0023 00000000`00000246 00000000`07cf7f1c : <span style="color: #0000ff;">wow64cpu!CpupSyscallStub</span>+0x9
00000000`0393be40 00000000`7480d286 : 00000000`00000000 00000000`74791904 00000000`00000000 00000000`7480d286 : <span style="color: #0000ff;">wow64cpu!Thunk0ArgReloadState</span>+0x23
00000000`0393bf00 00000000`74808a90 : 00000000`00000000 00000000`7480d286 00000000`0393cd18 00000000`74808b14 : wow64!RunCpuSimulation+0xa
00000000`0393bf50 00000000`747d7938 : 00000000`0393c2d0 00000000`0000002f 00000000`0393cc30 00000000`00000030 : wow64!Wow64KiUserCallbackDispatcher+0x204
00000000`0393c2a0 00000000`7707b5ef : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : wow64win!whcbfnHkINLPMSG+0xc0
00000000`0393ccb0 00000000`747e0bda : 00000000`747c374c 00000002`00000000 00000000`ffffffff 00000000`77ec623e : ntdll!KiUserCallbackDispatcherContinue
00000000`0393cd68 00000000`747c374c : 00000002`00000000 00000000`ffffffff 00000000`77ec623e 00000000`0393d6d0 : wow64win!ZwUserRealInternalGetMessage+0xa
00000000`0393cd70 00000000`7480d18f : 00000000`07cfc95c 00000000`07cfc9cc 00000002`00000000 00000000`7ef96000 : wow64win!whNtUserRealInternalGetMessage+0x40
00000000`0393cde0 00000000`74792776 : 00000000`771e010c 00000000`74790023 00000000`00000246 00000000`07cfca0c : wow64!Wow64SystemServiceEx+0xd7
00000000`0393d6a0 00000000`7480d286 : 00000000`07cfca68 00000000`74791904 00000000`7ef94000 00000000`7ef96000 : wow64cpu!TurboDispatchJumpAddressEnd+0x2d
00000000`0393d760 00000000`74808a90 : 00000002`00000000 00000000`0393e548 00000000`7ef96000 00000121`00000000 : wow64!RunCpuSimulation+0xa
00000000`0393d7b0 00000000`747d8f5b : 00000000`0393db60 00000000`0000003f 00000000`0393e4c0 00000000`00000014 : wow64!Wow64KiUserCallbackDispatcher+0x204
00000000`0393db00 00000000`7707b5ef : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00001fa0 : wow64win!whcbClientGetMessageMPH+0x9b
00000000`0393e4f0 00000000`747dfd4a : 00000000`747bad9b 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!KiUserCallbackDispatcherContinue
00000000`0393e568 00000000`747bad9b : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : wow64win!ZwUserPeekMessage+0xa
00000000`0393e570 00000000`7480d18f : 00000000`07cfca40 00000000`7ef94000 00000000`00000000 00000000`0393e5f8 : wow64win!whNtUserPeekMessage+0x37
00000000`0393e5e0 00000000`74792776 : 00000000`75f372b9 00000000`00000023 00000000`00000246 00000000`07cfca2c : wow64!Wow64SystemServiceEx+0xd7
00000000`0393eea0 00000000`7480d286 : 00000000`00000000 00000000`74791920 00000000`00000000 00000000`00000000 : wow64cpu!TurboDispatchJumpAddressEnd+0x2d
00000000`0393ef60 00000000`7480c69e : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : wow64!RunCpuSimulation+0xa
00000000`0393efb0 00000000`770a9ba4 : 00000000`00000000 00000000`7efdf000 00000000`7ef94000 00000000`00000000 : wow64!Wow64LdrpInitialize+0x42a
00000000`0393f500 00000000`7705374e : 00000000`0393f5c0 00000000`00000000 00000000`7efdf000 00000000`00000000 : ntdll! ?? ::FNODOBFM::`string'+0x22b94
00000000`0393f570 00000000`00000000 : 00000000`00000000 00000000`00000000 00000000`00000000 00000000`00000000 : ntdll!LdrInitializeThunk+0xe

MODULE_NAME: Unknown_Module

IMAGE_NAME: Unknown_Image

DEBUG_FLR_IMAGE_TIMESTAMP: 0

<span style="color: #0000ff;">STACK_COMMAND: ~14s ; kb                    <em><span style="color: #ff0000;"> ~14s; kb 이 명령어를 command 창에 입력하라는 것임</span></em></span>

<span style="color: #0000ff;">BUCKET_ID: X64_HANG</span>

<span style="color: #0000ff;">FAILURE_BUCKET_ID: APPLICATION_HANG_cfffffff_Unknown_Image!Unknown</span>

WATSON_STAGEONE_URL: http://watson.microsoft.com/00000000.htm?Retriage=1
*** Followup info cannot be found !!! Please contact "Debugger Team"
---------</pre>
<p><span style="font-size: 1rem;">&gt; !wow64exts.sw                         <span style="color: #ff0000;"><em>wow64cpu를 만나면 32bit mode로 전환해야함</em></span></span></p>
<pre>Switched to 32bit mode</pre>
<p>0:000:x86&gt;<span style="color: #000000;"> ~14s ; kb</span></p>
<pre>ntdll_771d0000!ZwWaitForSingleObject+0x15:
771ef901 83c404 add esp,4
ChildEBP RetAddr Args to Child
07cf7068 7721ebf6 000010c0 00000000 00000000 ntdll_771d0000!ZwWaitForSingleObject+0x15
07cf70cc 7721eada 00000000 00000000 07cf8eec ntdll_771d0000!RtlpWaitOnCriticalSection+0x13e
07cf70f4 10062647 <span style="color: #ff0000;">100d0078</span> 7d9a68e8 000c1b60 ntdll_771d0000!<span style="color: #ff0000;">RtlEnterCriticalSection</span>+0x150
WARNING: Stack unwind information not available. Following frames may be wrong.  <span style="color: #ff0000;"><em> 위 오류에 대한 스택입니다.</em></span>
<span style="color: #ff0000;">07cf7b44 10065a66 7d9a6c28 000c1b60 07cf8eec SPF!ExitThreadHook+0x46507</span>
07cf7f84 10037629 07cf8eec 100891ec 07cf8eec SPF!ExitThreadHook+0x49926
07cf83d8 100378f2 000c1b60 0e132748 07cf8eec SPF!ExitThreadHook+0x1b4e9
07cf83f8 10029f0b 000c1b60 0000004b 0000003b SPF!ExitThreadHook+0x1b7b2
07cfa7b0 1002c4cc 002516ec 00000016 07cfc21c SPF!ExitThreadHook+0xddcb
07cfc1f0 1001b111 07cfc21c 00000000 100ce940 SPF!ExitThreadHook+0x1038c
07cfc870 75f47451 00000000 00000001 07cfc934 SPF!CheckAttachType+0xd31
07cfc88c 75f380a9 00030000 00000001 07cfc934 user32!DispatchHookW+0x38
07cfc8cc 75f38ba1 07cfc924 07cfc934 07cfc950 user32!CallHookWithSEH+0x21
07cfc90c 771e013a 07cfc924 00000000 07cfca1c user32!__fnHkINLPMSG+0x75
*** WARNING: symbols timestamp is wrong 0x4a5bdf26 0x4a5bda06 for duser.dll
07cfc954 64921430 07cfc9d8 00000000 00000000 ntdll_771d0000!KiUserCallbackDispatcher+0x2e
07cfc990 649214e9 07cfc9d8 00000000 00000000 duser!CoreSC::xwProcessNL+0xfb
07cfc9b8 75f7fd3b 07cfc9d8 00000000 00000000 duser!MphProcessMessage+0x5e
07cfca0c 771e013a 07cfca24 00000000 07cfe854 user32!__ClientGetMessageMPH+0x34
07cfca38 75f40703 07cfcab4 00000000 00000000 ntdll_771d0000!KiUserCallbackDispatcher+0x2e
07cfca60 75f40769 07cfcab4 00000000 00000000 user32!_PeekMessage+0x88
07cfca8c 75f5d7ee 07cfcab4 00000000 00000000 user32!PeekMessageW+0x108
07cfcadc 75f5da5c 002516ec 001f19ba 00000008 user32!DialogBox2+0xfc
07cfcb08 75f5d98a 75b80000 0dff0b58 001f19ba user32!InternalDialogBox+0xe5
07cfcb28 75f5d70e 75b80000 0dff0b58 001f19ba user32!DialogBoxIndirectParamAorW+0x37
07cfcb48 75b8597b 75b80000 0dff0b58 001f19ba user32!DialogBoxIndirectParamW+0x1b
07cfcb94 6de7011a 0dff0b58 001f19ba 6495e610 comdlg32!CFileOpenSave::Show+0x181
07cfcbbc 531d56dc 54c93509 04363758 07cfe918 mfc90u!CFileDialog::DoModal+0xc5
07cfe85c 531dcaaa 07cfe918 54c916ad 04356204 JECM!CJBusiness::Function+0xa3c [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 1462]
07cfe8b0 531e9bde 04363784 04351ef8 54c91605 JECM!CJBusiness::Query+0x7ea [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 591]
07cfec34 531db624 04363758 043561f8 04363da8 JECM!CJCustomize::QueryStart+0x2be [c:\cubedisk\cubedisk_18-09-27\jecm\jcustomizequery.cpp @ 615]
07cfecdc 531dc97d 043561f8 54c9122d 07cfed98 JECM!CJBusiness::Download+0x684 [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 858]
07cfed30 531df1b0 04363784 04351e68 54c91385 JECM!CJBusiness::Query+0x6bd [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 558]
07cfee18 755c5bfa 07cff060 00000000 755c5a4a JECM!ATL::CAxDialogImpl&lt;CJECMControl,ATL::CWindow&gt;::CreateActiveXControls+0x210 [c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlwin.h @ 3708]
07cfee74 755a64f6 00000000 b1b3e261 036faa58 rpcrt4!NdrpServerOutInit+0x10f
07cfeea8 7720649f 75a28e42 75a28382 07cff030 rpcrt4!_SEH_epilog4
07cfeedc 00000000 000036b7 75b19bd4 071f0778 ntdll_771d0000!RtlNtStatusToDosError+0x3b</pre>
<p>0:014:x86&gt; kbn                                   <em><span style="color: #ff0000;">문제가 있는  부분 심볼 적용</span></em></p>
<pre> # ChildEBP RetAddr  Args to Child              
00 07cf7068 7721ebf6 000010c0 00000000 00000000 ntdll_771d0000!NtWaitForSingleObject+0x15
01 07cf70cc 7721eada 00000000 00000000 07cf8eec ntdll_771d0000!RtlpWaitOnCriticalSection+0x13e
02 07cf70f4 <strong><span style="color: #ff0000;">10062647</span></strong> <strong><span style="color: #ff0000;">100d0078</span></strong> 7d9a68e8 000c1b60 ntdll_771d0000!RtlEnterCriticalSection+0x150
03 07cf7b44 10065a66 <span style="color: #0000ff;">7d9a6c28</span> 000c1b60 07cf8eec SPF!CheckPath+0x2f7 [e:\projects2010\hook\spf\spfolder.cpp @ 1280] 
04 07cf7f84 10037629 07cf8eec 100891ec 07cf8eec SPF!GetFullPathOfComboLBox2+0x896 [e:\projects2010\hook\spf\spfolder.cpp @ 2254] 
05 07cf83d8 100378f2 000c1b60 0e132748 07cf8eec SPF!GetActiveFolder+0x429 [e:\projects2010\hook\spf\exputil2.cpp @ 401] 
06 07cf83f8 10029f0b 000c1b60 0000004b 0000003b SPF!GetTreeViewFolder+0x52 [e:\projects2010\hook\spf\exputil2.cpp @ 484] 
07 07cfa7b0 1002c4cc 002516ec 00000016 07cfc21c SPF!ChkOpenDlg+0x2ceb [e:\projects2010\hook\spf\commondlg.cpp @ 2600] 
08 07cfc1f0 1001b111 07cfc21c 00000000 100ce940 SPF!ChkRun+0x16c [e:\projects2010\hook\spf\commondlg.cpp @ 6285] 
09 07cfc870 75f47451 00000000 00000001 07cfc934 SPF!GetMsgProc+0x751 [e:\projects2010\hook\spf\api1.cpp @ 1587] 
0a 07cfc88c 75f380a9 00030000 00000001 07cfc934 user32!DispatchHookW+0x38
0b 07cfc8cc 75f38ba1 07cfc924 07cfc934 07cfc950 user32!CallHookWithSEH+0x21
0c 07cfc90c 771e013a 07cfc924 00000000 07cfca1c user32!__fnHkINLPMSG+0x75
0d 07cfc954 64921430 07cfc9d8 00000000 00000000 ntdll_771d0000!KiUserCallbackDispatcher+0x2e
0e 07cfc990 649214e9 07cfc9d8 00000000 00000000 duser!CoreSC::xwProcessNL+0xfb
0f 07cfc9b8 75f7fd3b 07cfc9d8 00000000 00000000 duser!MphProcessMessage+0x5e
10 07cfca0c 771e013a 07cfca24 00000000 07cfe854 user32!__ClientGetMessageMPH+0x34
11 07cfca38 75f40703 07cfcab4 00000000 00000000 ntdll_771d0000!KiUserCallbackDispatcher+0x2e
12 07cfca60 75f40769 07cfcab4 00000000 00000000 user32!_PeekMessage+0x88
13 07cfca8c 75f5d7ee 07cfcab4 00000000 00000000 user32!PeekMessageW+0x108
14 07cfcadc 75f5da5c 002516ec 001f19ba 00000008 user32!DialogBox2+0xfc
15 07cfcb08 75f5d98a 75b80000 0dff0b58 001f19ba user32!InternalDialogBox+0xe5
16 07cfcb28 75f5d70e 75b80000 0dff0b58 001f19ba user32!DialogBoxIndirectParamAorW+0x37
17 07cfcb48 75b8597b 75b80000 0dff0b58 001f19ba user32!DialogBoxIndirectParamW+0x1b
18 07cfcb94 6de7011a 0dff0b58 001f19ba 6495e610 comdlg32!CFileOpenSave::Show+0x181
19 07cfcbbc 531d56dc 54c93509 04363758 07cfe918 mfc90u!CFileDialog::DoModal+0xc5
1a 07cfe85c 531dcaaa 07cfe918 54c916ad 04356204 JECM!CJBusiness::Function+0xa3c [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 1462] 
1b 07cfe8b0 531e9bde 04363784 04351ef8 54c91605 JECM!CJBusiness::Query+0x7ea [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 591] 
1c 07cfec34 531db624 04363758 043561f8 04363da8 JECM!CJCustomize::QueryStart+0x2be [c:\cubedisk\cubedisk_18-09-27\jecm\jcustomizequery.cpp @ 615] 
1d 07cfecdc 531dc97d 043561f8 54c9122d 07cfed98 JECM!CJBusiness::Download+0x684 [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 858] 
1e 07cfed30 531df1b0 04363784 04351e68 54c91385 JECM!CJBusiness::Query+0x6bd [c:\cubedisk\cubedisk_18-09-27\jecm\jbusiness.cpp @ 558] 
1f 07cfee18 755c5bfa 07cff060 00000000 755c5a4a JECM!ATL::CAxDialogImpl&lt;CJECMControl,ATL::CWindow&gt;::CreateActiveXControls+0x210 [c:\program files (x86)\microsoft visual studio 9.0\vc\atlmfc\include\atlwin.h @ 3708] 
20 07cfee74 755a64f6 00000000 b1b3e261 036faa58 rpcrt4!NdrpServerOutInit+0x10f
21 07cfeea8 7720649f 75a28e42 75a28382 07cff030 rpcrt4!_SEH_epilog4
22 07cfeedc 00000000 000036b7 75b19bd4 071f0778 ntdll_771d0000!RtlNtStatusToDosError+0x3b



</pre>
<p>0:014:x86&gt; !cs <strong><span style="color: #ff0000;">100d0078                              </span></strong><span style="color: #ff0000;"><em>RtlEnterCriticalSection 의 args주소 확인</em></span></p>
<pre>-----------------------------------------
Critical section   = 0x100d0078 (<span style="color: #ff0000;">SPF!g_spfolder_cs+0x0</span>)
DebugInfo          = 0x0726d640
LOCKED
LockCount          = 0x1
WaiterWoken        = No
OwningThread       = 0x0000<span style="color: #ff0000;">3004</span>
RecursionCount     = 0x1
LockSemaphore      = 0x10C0
SpinCount          = 0x00000000

</pre>
<p>0:014:x86&gt; u 10062647</p>
<pre>SPF!CheckPath+0x2f7 [e:\projects2010\hook\spf\spfolder.cpp @ 1280]:
10062647 393590000d10    cmp     dword ptr [SPF!g_pSpFolder (100d0090)],esi
1006264d 7410            je      SPF!CheckPath+0x30f (1006265f)
1006264f 6878000d10      push    offset SPF!g_spfolder_cs (100d0078)
10062654 ff15d8d10710    call    dword ptr [SPF!_imp__LeaveCriticalSection (1007d1d8)]
1006265a e9bc040000      jmp     SPF!InitSpecialFolder+0x25b (10062b1b)
1006265f 89b5e4f5ffff    mov     dword ptr [ebp-0A1Ch],esi
10062665 89b5d4f5ffff    mov     dword ptr [ebp-0A2Ch],esi
1006266b 89b5ecf5ffff    mov     dword ptr [ebp-0A14h],esi</pre>
<p>0:014:x86&gt; dt SPF!CheckPath  <span style="color: #ff0000;">// SPF!CheckPath <em>args 주소( </em>0x7d9a6c28 )확인을 위해 구조체 Parsing</span></p>
<pre>CheckPath void (
ATL::CStringT&lt;wchar_t,StrTraitMFC_DLL&lt;wchar_t,ATL::ChTraitsCRT&lt;wchar_t&gt; &gt; &gt;*)</pre>
<p>0:014:x86&gt;dx -r1 ((SPF!ATL::CStringT&lt;wchar_t,StrTraitMFC_DLL&lt;wchar_t,ATL::ChTraitsCRT&lt;wchar_t&gt; &gt; &gt; *)0x7d9a6c28)</p>
<pre>((SPF!ATL::CStringT&lt;wchar_t,StrTraitMFC_DLL&lt;wchar_t,ATL::ChTraitsCRT&lt;wchar_t&gt; &gt; &gt; *)0x7d9a6c28)                 : 0x7d9a6c28 [Type: ATL::CStringT&lt;wchar_t,StrTraitMFC_DLL&lt;wchar_t,ATL::ChTraitsCRT&lt;wchar_t&gt; &gt; &gt; *]
    [+0x000] m_pszData        : Unable to read memory at Address 0x7d9a6c28</pre>
<p>0:014:x86&gt; lmvm SPF                                                  <em><span style="color: #ff0000;">문제가 있는 모듈 정보확인</span></em></p>
<pre>start    end        module name
10010000 1069d000   SPF      # (private pdb symbols)  \\166.125.11.182\edm5\debug\windbg\ossymbols_win7\SPF.pdb\0B4AA2F79BAD4546AAA743BE12C607041\SPF.pdb
    Loaded symbol image file: SPF.dll
    Image path: C:\Windows\System32\SPF.dll
    Image name: SPF.dll
    Browse all global symbols  functions  data
    Timestamp:        Thu Sep  6 02:21:58 2018 (5B90F1B6)
    CheckSum:         00665ACA
    ImageSize:        0068D000
    File version:     3.3.0.57
    Product version:  3.3.0.57
    File flags:       0 (Mask 3F)
    File OS:          4 Unknown Win32
    File type:        2.0 Dll
    File date:        00000000.00000000
    Translations:     0409.04b0
    Information from resource tables:
        CompanyName:      ITM System
        ProductName:      SPF Dynamic Link Library
        InternalName:     SPF
        OriginalFilename: SPF.DLL
        ProductVersion:   3.3.0.57
        FileVersion:      3.3.0.57
        FileDescription:  SPF DLL
        LegalCopyright:   Copyright (C) 2008 ITM System

0:014:x86&gt; !dh 10010000 -f

File Type: DLL
FILE HEADER VALUES
14C machine (i386)
6 number of sections
5B90F198 time date stamp Thu Sep 06 18:21:28 2018

0 file pointer to symbol table
0 number of symbols
E0 size of optional header
2102 characteristics
Executable
32 bit word machine
DLL

OPTIONAL HEADER VALUES
10B magic #
10.00 linker version
6B800 size of code
5E6400 size of initialized data
0 size of uninitialized data
677D5 address of entry point
1000 base of code
----- new -----
0000000010000000 image base
1000 section alignment
200 file alignment
2 subsystem (Windows GUI)
5.01 operating system version
0.00 image version
5.01 subsystem version
67D000 size of image
400 size of headers
65DD5E checksum
0000000000100000 size of stack reserve
0000000000001000 size of stack commit
0000000000100000 size of heap reserve
0000000000001000 size of heap commit
100 DLL characteristics
NX compatible
9CFD0 [ 203] address [size] of Export Directory
9ACA4 [ 17C] address [size] of Import Directory
66B000 [ 4DC4] address [size] of Resource Directory
0 [ 0] address [size] of Exception Directory
0 [ 0] address [size] of Security Directory
670000 [ 8C28] address [size] of Base Relocation Directory
6D9D0 [ 1C] address [size] of Debug Directory
0 [ 0] address [size] of Description Directory
0 [ 0] address [size] of Special Directory
0 [ 0] address [size] of Thread Storage Directory
976A8 [ 40] address [size] of Load Configuration Directory
0 [ 0] address [size] of Bound Import Directory
6D000 [ 9A0] address [size] of Import Address Table Directory
0 [ 0] address [size] of Delay Import Directory
0 [ 0] address [size] of COR20 Header Directory
0 [ 0] address [size] of Reserved Directory</pre>
<p>0:014:x86&gt; !lmi SPF.DLL                                               <em><span style="color: #ff0000;">문제가 있는 모듈 정보확인</span></em></p>
<pre>Loaded Module Info: [spf] 
         Module: SPF
   Base Address: 10010000
     Image Name: SPF.dll
   Machine Type: 332 (I386)
     Time Stamp: 5b90f198 Thu Sep  6 02:21:28 2018
           Size: 67d000
       CheckSum: 65dd5e
Characteristics: 2102  
Debug Data Dirs: Type  Size     VA  Pointer
             CODEVIEW    47, 976f0,   962f0 RSDS - GUID: {0B4AA2F7-9BAD-4546-AAA7-43BE12C60704}
               Age: 1, Pdb: E:\Projects2010\Hook\SPF\Win32\Release\SPF.pdb
     Image Type: MEMORY   - Image read successfully from loaded memory.
    Symbol Type: PDB      - Symbols loaded successfully from image header.
                 \\166.125.11.182\edm5\debug\windbg\ossymbols_win7\SPF.pdb\0B4AA2F79BAD4546AAA743BE12C607041\SPF.pdb
       Compiler: Resource - front end [0.0 bld 0] - back end [10.0 bld 40219]
    Load Report: private symbols &amp; lines, not source indexed 
                 \\166.125.11.182\edm5\debug\windbg\ossymbols_win7\SPF.pdb\0B4AA2F79BAD4546AAA743BE12C607041\SPF.pdb</pre>
]]></content:encoded>
										</item>
		<item>
		<title>symbol 확인 및 로드</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/symbol-%ed%99%95%ec%9d%b8/</link>
				<pubDate>Mon, 29 Oct 2018 00:53:39 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=428</guid>
				<description><![CDATA[▶ symbol 확인 symbol 이 제대로 로딩되었는지 확인하는 방법 &#62; !sym noisy noisy mode &#8211; symbol prompts on &#62; .reload /f [dll or exe module] SYMSRV:  &#8230;  &#8211; not found SYMSRV: https://msdl.microsoft.com/download/symbols/&#8230; &#8211; not found&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<p><span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /></span></span> symbol 확인<br />
symbol 이 제대로 로딩되었는지 확인하는 방법</p>
<p style="padding-left: 30px;"><span style="font-size: 1rem;">&gt; !sym noisy<br />
</span>noisy mode &#8211; symbol prompts on<br />
&gt; .reload /f [dll or exe module]<br />
SYMSRV:  &#8230;  &#8211; not found<br />
SYMSRV: https://msdl.microsoft.com/download/symbols/&#8230; &#8211; not found<br />
DBGHELP: &#8230; &#8211; mismatched pdb<br />
DBGHELP: &#8230; &#8211; <strong>no symbols loaded<br />
</strong>&gt; .reload /f              //모든 모듈 다시 불러온다</p>
<p>심볼이 잘못된 경우 마지막 줄에 no symbols loaded로 표시된다.<strong><br />
</strong></p>
<p>또 다른 symbol 정보 확인하는 방법</p>
<p style="padding-left: 30px;"><span style="font-size: 1rem;">&gt; !chksym  [dll or exe module]</span></p>
<p><span style="font-size: 1rem;">quiet 모드로 바꾸기 위해서는</span></p>
<p style="padding-left: 30px;"><span style="font-size: 1rem;">!sym quiet<br />
</span>quiet mode &#8211; symbol prompts on<br />
을 실행한다.</p>
<p><span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /></span></span> ChkMatch 확인</p>
<p><a href="https://github.com/appi77/myblog/download/chkmatch-exe/?wpdmdl=433&amp;masterkey=5bd680d33d92a">ChkMatch.exe</a>를 다운받는다</p>
<p>c:\{my util}\ChkMatch.exe -c [ExeFile DebugInfoFile]<br />
&#8230;<br />
&#8230;<br />
Result : Unmatched (reason: Signature mismatch)</p>
<p>-m 옵션과 함께 호출되면 디버그 정보 파일을 수정하려고 시도한다.<br />
c:\{my util}ChkMatch.exe -m [ExeFile DebugInfoFile]<br />
Result : Success</p>
<p>참고 <a href="http://www.debuginfo.com/tools/chkmatch.html">http://www.debuginfo.com/tools/chkmatch.html</a></p>
<p>&nbsp;</p>
<p class="csharpcode"><span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /></span></span> SOS.DLL 오류 시</p>
<p class="csharpcode">.load C:\Windows\<span class="skimlinks-unlinked">Microsoft.NET\Framework\v4.0.30319\sos.dll</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
]]></content:encoded>
										</item>
		<item>
		<title>Memory Dump(crash dump) 남기기</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/application-memory-dump-%eb%82%a8%ea%b8%b0%ea%b8%b0/</link>
				<pubDate>Fri, 26 Oct 2018 00:31:44 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=368</guid>
				<description><![CDATA[덤프파일을 남기기 위해 Taskmgr, WinDbg, Post Mortem Debugging, Dr.Watson,시스템 오류 덤프 등을 상황에 맞게 사용 한다. 상황에 따른 메모리 덤프(크래시 덤프) 파일을 생성 방법 - application의 hang이나 오류 시 Taskmgr 사용 - application의 비정상종료 시 WinDbg&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<p>덤프파일을 남기기 위해 T<span style="font-size: small;"><span lang="EN-US">askmgr, WinDbg, </span></span>Post Mortem Debugging, Dr.Watson,시스템 오류 덤프 등을 상황에 맞게 사용 한다.</p>
<pre>상황에 따른 메모리 덤프(크래시 덤프) 파일을 생성 방법
- application의 hang이나 오류 시 Taskmgr 사용
- application의 비정상종료 시 WinDbg 을 기본디버거로 등록하여 사용
- OS나 응용 프로그램에 문제가 발생하여 PC가 다운 시 %SystemRoot%\Minidump 확인</pre>
<p><span id="more-368"></span><br />
<span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> Taskmgr</span></span></p>
<p>vista 이후 windows에서는 작업관리자에서 덤프파일를 의도적으로 생성할 수 있다.<br />
생성되는 위치는 <span style="font-size: 1rem;">C:\Users\{user_name}\AppData\Local\Temp\{process_name}.DMP 이다.</span></p>
<p><span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </span></span>WinDbg</p>
<p><a href="https://github.com/appi77/myblog/download/windbg-for-dump/?wpdmdl=375&amp;masterkey=5bd25fdf2af72">windbg</a> 을 다운 받고 관리자 권한 커맨드창에서 &#8220;windbg.exe -I&#8221; 명령으로 기본 디버거로 등록 한다.<br />
등록 확인 :  &#8220;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug&#8221;<br />
등록 삭제 : &#8220;Debugger&#8221; 와 &#8220;Auto&#8221; Value 삭제</p>
<p>기본디버거가 등록된 후 오류가 발생하면 자동으로 실행된 WinDbg의 command 창에서 &#8220;.dump /ma c:\temp\my.dmp&#8221; 을 실행하여 덤프파일을 생성한다.</p>
<p><span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </span></span>Post Mortem Debugging</p>
<p>Visual Studio가 설치된 PC에서 실행중인 프로세스가 비정상종료되면  Just-In-Time Debugger가 실행되고 문제된 프로세스가 자동으로 Attach된다. 디버거를 사용하여 메모리 덤프를 작성한다.</p>
<p><span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </span></span>Dr.Watson</p>
<p><a href="https://github.com/appi77/myblog/download/dr-watson/?wpdmdl=372&amp;masterkey=5bd257a53cdb4">Dr.Watson</a> 을 다운 받아  &#8220;drwtsn32 -i&#8221; 으로 기본 디버거로 등록한다.<br />
등록 확인 :  &#8220;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug&#8221;<br />
등록 삭제 : &#8220;Debugger&#8221; 와 &#8220;Auto&#8221; Value 삭제</p>
<p id="zjYwhhS"><img class="size-full wp-image-371 alignleft" src="https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd256b8e524a.png" alt="" srcset="https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd256b8e524a.png 451w, https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd256b8e524a-100x100.png 100w, https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd256b8e524a-150x150.png 150w, https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd256b8e524a-297x300.png 297w" sizes="(max-width: 451px) 100vw, 451px" />Dr.Watson을 실행하여 &#8220;크래시 덤프 유형&#8221; 을 &#8220;전체&#8221;로 선택합니다.</p>
<p>기본디버거가 등록된 후 오류가 발생하면 로그 파일 경로에 덤프파일이 생성됩니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> 시스템 오류의 메모리 덤프파일(memory dump)</p>
<p>컴퓨터 작업 도중에 OS나 응용 프로그램에 문제가 발생하여 PC가 다운되는 시스템 오류가 발생하면 %SystemRoot%\Minidump 폴더에 자동으로 덤프파일이 생성된다.<br />
메모리 덤프파일을 비활성화하거나 디버깅 정보 쓰기를 변경하고 싶으면 시작 및 복구 창에서 조정한다.<br />
<img class="alignnone size-full wp-image-380 " style="font-size: 1rem;" src="https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd26425994cb.png" alt="" srcset="https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd26425994cb.png 453w, https://github.com/appi77/myblog/wordpress/wp-content/uploads/2018/10/img_5bd26425994cb-287x300.png 287w" sizes="(max-width: 453px) 100vw, 453px" /></p>
]]></content:encoded>
										</item>
		<item>
		<title>Crash Dump Files</title>
		<link>https://github.com/appi77/myblog/si-technology/debug/crash-dump-files/</link>
				<pubDate>Thu, 25 Oct 2018 08:26:54 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[DEBUG]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=362</guid>
				<description><![CDATA[Crash Dump Files은 특정한 시점의 메모리, 어플리케이션, 운영체제와 관련된 데이터를 가지고 있는 파일이다.  user-mode 크래쉬 덤프 파일은 어플리케이션에 오류가 발생했을 때 생성되고 kernel-mode 크래쉬 덤프 파일은 윈도우 자체에 오류가 발생했을 때 생성된다. 1 .Kernel-Mode Dump files bcdedit /debug ON&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<p><span lang="EN-US">Crash Dump Files</span>은 특정한 시점의 메모리, 어플리케이션, 운영체제와 관련된 데이터를 가지고 있는 파일이다<span lang="EN-US">.  </span><span lang="EN-US">user-mode </span>크래쉬 덤프 파일은 어플리케이션에 오류가 발생했을 때 생성되고 <span lang="EN-US">kernel-mode </span>크래쉬 덤프 파일은 윈도우 자체에 오류가 발생했을 때 생성된다.</p>
<p align="left"><span style="font-size: small;"><b><span lang="EN-US">1 .Kernel-Mode Dump files</span></b></span></p>
<p align="left">bcdedit /debug ON</p>
<p align="left"><span style="font-size: small;"><b><span lang="EN-US">2.User-Mode Dump files</span></b></span></p>
<p align="left"><span style="font-size: small;"><span lang="EN-US">User-Mode Dump 파일은 Full User-Mode Dump, </span></span><span style="font-size: small;"><span lang="EN-US">Minidump 가 있음</span></span></p>
<p align="left"><span style="font-size: small;"><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> </span></span><span style="font-size: small;"><b><span lang="EN-US">Full User-Mode Dumps<br />
</span></b></span>full user-mode dump는 기본적인 user-mode 덤프 파일이다.<br />
이 파일은 프로세스의 전체 메모리 공간, 프로그램의 실행 파일 이미지, 핸들 테이블, 그 밖에 디버깅에 유용한 여러 정보를 포함한다.<br />
full user-mode dump 파일은 minidump로 축소시킬 수 있다. 단순히 디버거에 덤프 파일을 로드하고 &#8216;.dump&#8217; 커맨드를 사용하여 새로운 minidump 형식의 덤프 파일을 저장한다.<br />
note. minidump라는 이름에도 불구하고, 가장 큰 minidump는 실제로 full user-mode dump보다 더 많은 정보를 가진다. 예를 들면, .dump /mf 혹은 .dump /ma는 .dump /f보다 더 크고 많은 정보를 가진 덤프 파일을 생성한다.<br />
user mode에서는 .dump /m[MiniOptions]이 가장 좋은 선택이다. 이 옵션 스위치를 사용하여 생성된 덤프 파일은 크기가 다양할 수 있다. 적절한 MiniOptions을 사용하여 포함될 정보를 명확하게 조절할 수 있다.</p>
<p align="left"><span style="font-size: small;"><b><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> Minidumps</span></b></span></p>
<p style="font-weight: 400;">어떤 프로세스와 관련된 메모리에서 선택된 부분적인 정보를 가지고 있는 user-mode dump 파일을 minidump라고 부른다. minidump 파일의 크기와 내용은 덤프의 대상이 되는 프로그램과 덤프를 만드는 어플리케이션에 따라서 다양하다. minidump 파일은 아주 크고 전체 메모리와 핸들 테이블을 포함하는 경우도 있고, 어쩔 때는 이보다 확연히 작을 수도 있다. 예를 들면, minidump 파일은 싱글 스레드에 대한 정보 혹은 실제로 참조되고 있는 모듈의 스택에 존재하는 정보만을 가지고 있을 수도 있다. 가장 큰 minidump 파일은 실제로 full user-dump보다 더 많은 정보를 가지고 있기 때문에 &#8216;minidump&#8217;라는 이름은 오해를 가져올 소지가 있다. 예를 들면, .dump /mf 혹은 .dump /ma는 .dump /f보다 더 많은 정보를 가지고 있는 덤프 파일을 만들어 낼 것이다. 이러한 이유 때문에, user-mode 덤프 파일을 생성할 때는 .dump /f보다는 .dump /m[MiniOption]를 사용하길 권장한다.</p>
<p style="font-weight: 400;">만약 디버거를 사용해서 minidump 파일을 생성하려고 한다면, 좀 더 정밀하게 포함되는 정보를 선택할 수 있다. 단순히 .dump /m 커맨드를 사용한다면 target process를 구성하는 로드된 모듈, thread 정보, 그리고 스택 정보에 대한 기본적인 정보만을 포함한 덤프를 만들어 낸다. 이것은 다음 옵션들에 의해서 변경될 수 있다.</p>
<table style="font-weight: 400;">
<tbody>
<tr>
<td width="57"> 옵션</td>
<td width="543"> 덤프에 미치는 영향</td>
</tr>
<tr>
<td width="57">/ma</td>
<td width="543">minidump의 모든 추가적인 옵션을 사용하는 것과 같은 효과를 낸다. /ma 옵션은 /mfFhut와 같다. 이것은 full memory data, 핸들 데이터, 로딩되지 않은 모듈 정보, 기본적인 메모리 정보,그리고 thread time 정보를 덤프 파일에 포함시킨다.</td>
</tr>
<tr>
<td width="57">/mf</td>
<td width="543">minidump 파일에 full memory data를 추가한다. target 어플리케이션이 소유하는 모든 접근 가능한 commit된 페이지를 포함한다.</td>
</tr>
<tr>
<td width="57">/mF</td>
<td width="543">minidump 파일에 메모리에 대한 모든 기본적인 정보를 추가한다. 이것은 유효한 메모리에 대한 정보만이 아니라 모든 메모리에 대한 기본적인 정보를 포함시킨다. 이것은 minidump를 가지고 디버깅을 할 때, 디버거가 프로세스에 대한 완전한 virtual memory layout을 재구성할 수 있도록 해준다.</td>
</tr>
<tr>
<td width="57">/mh</td>
<td width="543">minidump에 target process와 관련된 핸들에 대한 정보를 추가한다</td>
</tr>
<tr>
<td width="57">/mu</td>
<td width="543">minidump에 로딩되지 않은 모듈에 대한 정보를 추가한다. 이것은 오직 Windows Server 2003과 그 이후 버전의 윈도우에서만 사용할 수 있다.</td>
</tr>
<tr>
<td width="57">/mt</td>
<td width="543">minidump에 추가적인 thread 정보를 추가한다. 여기에는 minidump를 디버깅할 때 .ttime 커맨드에 의해서 표시되는 thread time이 포함된다.</td>
</tr>
<tr>
<td width="57">/mi</td>
<td width="543">Secondary memory를 minidump 파일에 추가한다. secondary memory라는 것은 스택이나 backing store에 있는 포인터에 의해서 참조되는 메모리와 그 포인터가 가르키는 주소 근처의 약간의 지역을 뜻한다. (역자주: backing store는 paging이나 swapping 시스템에 의해서 main memory에서 밀려 난 데이터들을 저장하는, 일반적으로 하드디스크의 특정 부분을 의미한다.)</td>
</tr>
<tr>
<td width="57">/mp</td>
<td width="543">Process Environment Block(PEB)와 Thread Environment Block(TEB) 데이터를 minidump에 추가한다. 이것은 어플리케이션의 프로세스나 thread에 관련된 Windows 시스템 정보에 접근할 필요가 있을 때 유용하다.</td>
</tr>
<tr>
<td width="57">/mw</td>
<td width="543">모든 commit된 read-write private page를 minidump에 추가한다.</td>
</tr>
<tr>
<td width="57">/md</td>
<td width="543">executable 이미지에 있는 모든 read-write 데이터 세그먼트를 minidump에 추가한다.</td>
</tr>
<tr>
<td width="57">/mc</td>
<td width="543">이미지에 있는 코드 섹션을 추가한다.</td>
</tr>
<tr>
<td width="57">/mr</td>
<td width="543">minidump에서 스택 추적(stack trace)을 재생성하는데 불필요한 스택이나 store memory의 일부분을 제거한다. 또한 로컬 변수나 다른 데이터 타입의 값들도 삭제된다. 이 옵션은 minidump를 더 작게 만들지는 않는다.(이러한 메모리 섹션은 단지 0으로 채워진다.) 이 옵션은 다른 어플리케이션의 privacy를 보호하기 원할 때 유용하다.</td>
</tr>
<tr>
<td width="57">/mR</td>
<td width="543">minidump에서 full module path를 삭제한다. 오직 모듈 이름만 포함된다. 이 옵션은 사용자의 디렉토리 구조에 관련된 privacy를 보호하기를 원할 때 유용하다.</td>
</tr>
<tr>
<td width="57">/mk &#8220;FileName&#8221;</td>
<td width="543">Windows Vista only) user-mode minidump에 더하여 kernel-mode minidump도 생성한다. kernel-mode minidump는 user-mode minidump에 저장되어 있는 thread에 대한 dump로 제한된다. FileName은 따옴표로 둘러 싸여야 한다.</td>
</tr>
</tbody>
</table>
<p style="font-weight: 400;">이 옵션들은 혼합되어 사용될 수 있다. 예를 들면, .dump /mfiu 커맨드는 확실히 용량이 큰 minidump를 만드는데 사용할 수 있고, .dump /mrR은 사용자의 privacy를 보호할 수 있는 minidump를 만드는데 사용할 수 있다. 더욱 완전하고 자세한 문법을 위해서는 .dump 커맨드에 대한 섹션을 참조하시오.(이후에 번역하겠음).</p>
<p style="font-weight: 400;">minidump 파일의 자세한 내부 구조는 Microsoft Windows SDK에 있는 DbgHelp reference에 있다</p>
<p>출처 : <span lang="EN-US"><a href="http://sixthman.tistory.com/77" target="_blank" rel="noopener">http://sixthman.tistory.com/77</a> </span></p>
<p>&nbsp;</p>
<p lang="en-US"><span style="font-size: small;"><b><span lang="EN-US"><img src="https://s.w.org/images/core/emoji/12.0.0-1/72x72/25b6.png" alt="▶" class="wp-smiley" style="height: 1em; max-height: 1em;" /> Windows 버전별로 Crash Dump 생성하는 법</span></b></span></p>
<p lang="en-US">1. Windows XP를 사용하는 경우</p>
<p>  &#8211; 윈도우 시작 -&gt; 실행 -&gt; 입력창에서 &#8220;drwtsn32&#8243;을 실행</p>
<p>&#8211; &#8220;크래시 덤프&#8221; 의 경로로 설정된 경로로 *.dmp 파일이 생성됨</p>
<p>&nbsp;</p>
<p lang="en-US">2. Windows Vista / Windows7 / Windows8 경우 (덤프를 남기는 기능이 기본적으로 꺼져있음)</p>
<p lang="en-US"> &#8211; 다음 경로의 레지스트리를 등록함(*첨부 파일 참조-미니 덤프 생성하는 레지스트리)</p>
<p>&nbsp;</p>
<p lang="en-US">레지스트리 위치 : HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Windows Error Reporting\LocalDumps</p>
<p>&nbsp;</p>
<div align="left">
<div class="_contentScrollArea">
<div>
<table class="__se_tbl_ext _wideContent" border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td>
<p lang="en-US">Value</p>
</td>
<td>설명</td>
<td>
<p lang="en-US">Type</p>
</td>
<td>
<p lang="en-US">Default value</p>
</td>
</tr>
<tr>
<td>
<p lang="en-US">DumpFolder</p>
</td>
<td>덤프파일이 저장될 폴더 경로</td>
<td>
<p lang="en-US">REG_EXPAND_SZ</p>
</td>
<td>
<p lang="en-US">%LOCALAPPDATA%\CrashDumps</p>
</td>
</tr>
<tr>
<td>
<p lang="en-US">DumpCount</p>
</td>
<td>폴더에 저장되는 덤프파일의 최대 개수</td>
<td>
<p lang="en-US">REG_DWORD</p>
</td>
<td>
<p lang="en-US">5</p>
</td>
</tr>
<tr>
<td>
<p lang="en-US">DumpType</p>
</td>
<td>
<p lang="en-US">1: 미니 덤프</p>
<p lang="en-US">2: 전체 덤프</p>
</td>
<td>
<p lang="en-US">REG_DWORD</p>
</td>
<td>
<p lang="en-US">1</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>&nbsp;</p>
<p>&#8211; 시스템재부팅</p>
<p>&#8211; 오류발생시 탐색기에서 %LOCALAPPDATA%\CrashDumps 경로에 *.dmp 파일이 생성됨</p>
]]></content:encoded>
										</item>
	</channel>
</rss>
