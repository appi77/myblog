<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Linux &#8211; 山情</title>
	<atom:link href="https://github.com/appi77/myblog/category/si-technology/linux/feed/" rel="self" type="application/rss+xml" />
	<link>http://github.com/appi77/myblog/</link>
	<description>산정의 블로그</description>
	<lastBuildDate>Mon, 14 Oct 2019 21:51:17 +0000</lastBuildDate>
	<language>ko-KR</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.3.2</generator>

<image>
	<url>https://github.com/appi77/myblog/wordpress/wp-content/uploads/2016/07/cropped-20160505_122002-32x32.jpg</url>
	<title>Linux &#8211; 山情</title>
	<link>http://github.com/appi77/myblog/</link>
	<width>32</width>
	<height>32</height>
</image> 
	<item>
		<title>Samba4 Active Directory 설치</title>
		<link>https://github.com/appi77/myblog/si-technology/linux/samba4-active-directory-%ec%84%a4%ec%b9%98/</link>
				<pubDate>Mon, 14 Oct 2019 02:43:18 +0000</pubDate>
		<dc:creator><![CDATA[박경원]]></dc:creator>
				<category><![CDATA[Linux]]></category>

		<guid isPermaLink="false">https://github.com/appi77/myblog/?p=1554</guid>
				<description><![CDATA[[참고] https://www.tecmint.com/install-samba4-active-directory-ubuntu/ https://helia.ee/koolitus/linuxi-materjalid/debian/create-active-directory-infrastructure-samba4-ubuntu/ 설정 후 DNS를 자동 업데이트 하기 위해서는 vi /etc/samba/smb.conf nsupdate command = nsupdate allow dns updates = nonsecure 추가해야 함 sudo systemctl restart samba-ad-dc.service samba_dnsupdate &#8211;verbose &#8211;all-names 오류가 없어야 함 수정&#46;&#46;&#46;]]></description>
								<content:encoded><![CDATA[<p>[참고] <a href="https://www.tecmint.com/install-samba4-active-directory-ubuntu/" target="_blank" rel="nofollow noopener noreferrer">https://www.tecmint.com/install-samba4-active-directory-ubuntu/</a></p>
<p><a href="https://helia.ee/koolitus/linuxi-materjalid/debian/create-active-directory-infrastructure-samba4-ubuntu/" target="_blank" rel="nofollow noopener noreferrer">https://helia.ee/koolitus/linuxi-materjalid/debian/create-active-directory-infrastructure-samba4-ubuntu/</a></p>
<p>설정 후<br />
DNS를 자동 업데이트 하기 위해서는<br />
vi /etc/samba/smb.conf<br />
nsupdate command = nsupdate<br />
allow dns updates = nonsecure<br />
추가해야 함<br />
sudo systemctl restart samba-ad-dc.service<br />
samba_dnsupdate &#8211;verbose &#8211;all-names 오류가 없어야 함</p>
<p>수정 및 재시작<br />
[samba]<br />
vi /etc/samba/smb.conf<br />
sudo systemctl restart samba-ad-dc.service<br />
[ip address]<br />
vi /etc/network/interfaces<br />
vi /etc/resolv.conf<br />
sudo systemctl restart networking.service<br />
[dhcp]<br />
vi /etc/dhcp/dhcpd.conf<br />
sudo systemctl restart isc-dhcp-server.service</p>
<p>cat /etc/samba/smb.conf<br />
# Global parameters<br />
[global]<br />
workgroup = ECMDEV<br />
realm = ECMDEV.LO<br />
netbios name = ADC<br />
log level = 3<br />
server role = active directory domain controller<br />
dns forwarder = 192.168.137.1<br />
nsupdate command = nsupdate<br />
allow dns updates = nonsecure<br />
idmap_ldb:use rfc2307 = yes</p>
<p>template shell = /bin/bash<br />
winbind use default domain = true<br />
winbind offline logon = false<br />
winbind nss info = rfc2307</p>
<p>winbind enum users = yes<br />
winbind enum groups = yes</p>
<p>[netlogon]<br />
path = /var/lib/samba/sysvol/ecmdev.lo/scripts<br />
read only = No</p>
<p>[sysvol]<br />
path = /var/lib/samba/sysvol<br />
read only = No</p>
<p>[nas]<br />
path = /nas<br />
read only = No</p>
<p>[nas_test]<br />
path = /nas_test<br />
read only = No</p>
<p>&nbsp;</p>
<p>test@adc:~$ cat /etc/resolv.conf<br />
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)<br />
# DO NOT EDIT THIS FILE BY HAND &#8212; YOUR CHANGES WILL BE OVERWRITTEN<br />
nameserver 192.168.137.2<br />
nameserver 192.168.137.1<br />
search ecmdev.lo</p>
<p>ls -l /dev/disk/by-uuid</p>
<p>test@adc:~$ cat /etc/fstab<br />
# /etc/fstab: static file system information.<br />
#<br />
# Use &#8216;blkid&#8217; to print the universally unique identifier for a<br />
# device; this may be used with UUID= as a more robust way to name devices<br />
# that works even if disks are added and removed. See fstab(5).<br />
#<br />
# &lt;file system&gt; &lt;mount point&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt;<br />
# / was on /dev/sda1 during installation<br />
UUID=28e34a5f-f6c5-4afb-87ab-ddcf902489ab / ext4 user_xattr,acl,barrier=1,errors=remount-ro 0 1<br />
# swap was on /dev/sda5 during installation<br />
UUID=ae4b223b-a328-48d4-a46d-f59dea75d3ec none swap sw 0 0<br />
UUID=71597a02-390a-4ae3-a5b7-9fb2e60bd834 /nas ext4 defaults 00<br />
UUID=2ec2cd01-4aaf-4d2a-ad9e-b20e5110dd0c /nas_test ext4 defaults 00</p>
<p>test@adc:~$ cat /etc/network/interfaces<br />
# This file describes the network interfaces available on your system<br />
# and how to activate them. For more information, see interfaces(5).</p>
<p>source /etc/network/interfaces.d/*</p>
<p># The loopback network interface<br />
auto lo<br />
iface lo inet loopback</p>
<p># The primary network interface<br />
auto ens33<br />
#iface ens33 inet dhcp<br />
iface ens33 inet static<br />
address 192.168.137.2<br />
netmask 255.255.255.0<br />
gateway 192.168.137.1<br />
dns-nameservers 192.168.137.2 192.168.137.1<br />
#dns-nameservers 192.168.137.2<br />
dns-search ecmdev.lo</p>
<p>test@adc:~$ cat /etc/dhcp/dhcpd.conf</p>
<p>ddns-update-style none;</p>
<p>option domain-name &#8220;ecmdev.lo&#8221;;<br />
option domain-name-servers adc.ecmdev.lo;</p>
<p>default-lease-time 600;<br />
max-lease-time 7200;</p>
<p>authoritative;</p>
<p>log-facility local7;</p>
<p>subnet 192.168.137.0 netmask 255.255.255.0 {<br />
range 192.168.137.20 192.168.137.90;<br />
option domain-name-servers adc.ecmdev.lo,192.168.137.1;<br />
option domain-name &#8220;ecmdev.lo&#8221;;<br />
option routers 192.168.137.1;<br />
option broadcast-address 192.168.137.255;<br />
default-lease-time 600;<br />
max-lease-time 7200;<br />
}</p>
<p>host sysmgr-w7 {<br />
hardware ethernet 00:0C:29:0F:74:8D;<br />
fixed-address 192.168.137.25;<br />
}<br />
host pc-ctrl {<br />
hardware ethernet 00:0C:29:9D:2C:A7;<br />
fixed-address 192.168.137.102;<br />
}<br />
host ecm_dev {<br />
hardware ethernet 00:0C:29:69:09:D7;<br />
fixed-address 192.168.137.101;<br />
}</p>
<p>&nbsp;</p>
<p>test@adc:~$ sudo samba-tool domain passwordsettings show<br />
# sudo samba-tool domain passwordsettings -h<br />
penta@adc:~$ sudo samba-tool domain passwordsettings set &#8211;complexity=off<br />
penta@adc:~$ sudo samba-tool domain passwordsettings set &#8211;history-length=0<br />
penta@adc:~$ sudo samba-tool domain passwordsettings set &#8211;min-pwd-length=4<br />
penta@adc:~$ sudo samba-tool domain passwordsettings set &#8211;min-pwd-age=0<br />
penta@adc:~$ sudo samba-tool domain passwordsettings set &#8211;max-pwd-age=0</p>
]]></content:encoded>
										</item>
	</channel>
</rss>
